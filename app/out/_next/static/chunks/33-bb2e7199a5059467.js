(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[33],{9033:function(e,t,r){"use strict";r.d(t,{Z:function(){return I}});var a=r(5893),i=r(7294),n=r(5675),l=r.n(n),d=r(2947);let s={x:0,y:0,width:0,height:0,unit:"px"},o=(e,t,r)=>Math.min(Math.max(e,t),r),c=(...e)=>e.filter(e=>e&&"string"==typeof e).join(" "),m=(e,t)=>e===t||e.width===t.width&&e.height===t.height&&e.x===t.x&&e.y===t.y&&e.unit===t.unit;function u(e,t,r){return"%"===e.unit?{...s,...e,unit:"%"}:{unit:"%",x:e.x?e.x/t*100:0,y:e.y?e.y/r*100:0,width:e.width?e.width/t*100:0,height:e.height?e.height/r*100:0}}function h(e,t,r){return e.unit?"px"===e.unit?{...s,...e,unit:"px"}:{unit:"px",x:e.x?e.x*t/100:0,y:e.y?e.y*r/100:0,width:e.width?e.width*t/100:0,height:e.height?e.height*r/100:0}:{...s,...e,unit:"px"}}function p(e,t,r,a,i,n=0,l=0,d=a,s=i){let o={...e},c=Math.min(n,a),m=Math.min(l,i),u=Math.min(d,a),h=Math.min(s,i);t&&(t>1?(m=(c=l?l*t:c)/t,u=d*t):(c=(m=n?n/t:m)*t,h=s/t)),o.y<0&&(o.height=Math.max(o.height+o.y,m),o.y=0),o.x<0&&(o.width=Math.max(o.width+o.x,c),o.x=0);let p=a-(o.x+o.width);p<0&&(o.x=Math.min(o.x,a-c),o.width+=p);let g=i-(o.y+o.height);if(g<0&&(o.y=Math.min(o.y,i-m),o.height+=g),o.width<c&&(("sw"===r||"nw"==r)&&(o.x-=c-o.width),o.width=c),o.height<m&&(("nw"===r||"ne"==r)&&(o.y-=m-o.height),o.height=m),o.width>u&&(("sw"===r||"nw"==r)&&(o.x-=u-o.width),o.width=u),o.height>h&&(("nw"===r||"ne"==r)&&(o.y-=h-o.height),o.height=h),t){let e=o.width/o.height;if(e<t){let e=Math.max(o.width/t,m);("nw"===r||"ne"==r)&&(o.y-=e-o.height),o.height=e}else if(e>t){let e=Math.max(o.height*t,c);("sw"===r||"nw"==r)&&(o.x-=e-o.width),o.width=e}}return o}let g={capture:!0,passive:!1},x=class e extends i.PureComponent{constructor(){super(...arguments),this.docMoveBound=!1,this.mouseDownOnCrop=!1,this.dragStarted=!1,this.evData={startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0},this.componentRef=(0,i.createRef)(),this.mediaRef=(0,i.createRef)(),this.initChangeCalled=!1,this.state={cropIsActive:!1,newCropIsBeingDrawn:!1},this.onCropPointerDown=e=>{let{crop:t,disabled:r}=this.props,a=this.getBox();if(!t)return;let i=h(t,a.width,a.height);if(r)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});let n=e.target.dataset.ord,l=e.clientX,d=e.clientY,s=i.x,o=i.y;if(n){let t=e.clientX-a.x,r=e.clientY-a.y,c=0,m=0;"ne"===n||"e"==n?(c=t-(i.x+i.width),m=r-i.y,s=i.x,o=i.y+i.height):"se"===n||"s"===n?(c=t-(i.x+i.width),m=r-(i.y+i.height),s=i.x,o=i.y):"sw"===n||"w"==n?(c=t-i.x,m=r-(i.y+i.height),s=i.x+i.width,o=i.y):("nw"===n||"n"==n)&&(c=t-i.x,m=r-i.y,s=i.x+i.width,o=i.y+i.height),l=s+a.x+c,d=o+a.y+m}this.evData={startClientX:l,startClientY:d,startCropX:s,startCropY:o,clientX:e.clientX,clientY:e.clientY,isResize:!!n,ord:n},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})},this.onComponentPointerDown=e=>{let{crop:t,disabled:r,locked:a,keepSelection:i,onChange:n}=this.props,l=this.getBox();if(r||a||i&&t)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});let d=e.clientX-l.x,s=e.clientY-l.y,o={unit:"px",x:d,y:s,width:0,height:0};this.evData={startClientX:e.clientX,startClientY:e.clientY,startCropX:d,startCropY:s,clientX:e.clientX,clientY:e.clientY,isResize:!0},this.mouseDownOnCrop=!0,n(h(o,l.width,l.height),u(o,l.width,l.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})},this.onDocPointerMove=e=>{let t;let{crop:r,disabled:a,onChange:i,onDragStart:n}=this.props,l=this.getBox();if(a||!r||!this.mouseDownOnCrop)return;e.cancelable&&e.preventDefault(),this.dragStarted||(this.dragStarted=!0,n&&n(e));let{evData:d}=this;d.clientX=e.clientX,d.clientY=e.clientY,m(r,t=d.isResize?this.resizeCrop():this.dragCrop())||i(h(t,l.width,l.height),u(t,l.width,l.height))},this.onComponentKeyDown=t=>{let{crop:r,disabled:a,onChange:i,onComplete:n}=this.props;if(a)return;let l=t.key,d=!1;if(!r)return;let s=this.getBox(),c=this.makePixelCrop(s),m=(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)?e.nudgeStepLarge:t.shiftKey?e.nudgeStepMedium:e.nudgeStep;if("ArrowLeft"===l?(c.x-=m,d=!0):"ArrowRight"===l?(c.x+=m,d=!0):"ArrowUp"===l?(c.y-=m,d=!0):"ArrowDown"===l&&(c.y+=m,d=!0),d){t.cancelable&&t.preventDefault(),c.x=o(c.x,0,s.width-c.width),c.y=o(c.y,0,s.height-c.height);let e=h(c,s.width,s.height),r=u(c,s.width,s.height);i(e,r),n&&n(e,r)}},this.onHandlerKeyDown=(t,r)=>{let{aspect:a=0,crop:i,disabled:n,minWidth:l=0,minHeight:d=0,maxWidth:s,maxHeight:o,onChange:c,onComplete:g}=this.props,x=this.getBox();if(n||!i||"ArrowUp"!==t.key&&"ArrowDown"!==t.key&&"ArrowLeft"!==t.key&&"ArrowRight"!==t.key)return;t.stopPropagation(),t.preventDefault();let b=(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)?e.nudgeStepLarge:t.shiftKey?e.nudgeStepMedium:e.nudgeStep,y=h(i,x.width,x.height),f=function(e,t,r,a){let i={...e};return"ArrowLeft"===t?"nw"===a?(i.x-=r,i.y-=r,i.width+=r,i.height+=r):"w"===a?(i.x-=r,i.width+=r):"sw"===a?(i.x-=r,i.width+=r,i.height+=r):"ne"===a?(i.y+=r,i.width-=r,i.height-=r):"e"===a?i.width-=r:"se"===a&&(i.width-=r,i.height-=r):"ArrowRight"===t&&("nw"===a?(i.x+=r,i.y+=r,i.width-=r,i.height-=r):"w"===a?(i.x+=r,i.width-=r):"sw"===a?(i.x+=r,i.width-=r,i.height-=r):"ne"===a?(i.y-=r,i.width+=r,i.height+=r):"e"===a?i.width+=r:"se"===a&&(i.width+=r,i.height+=r)),"ArrowUp"===t?"nw"===a?(i.x-=r,i.y-=r,i.width+=r,i.height+=r):"n"===a?(i.y-=r,i.height+=r):"ne"===a?(i.y-=r,i.width+=r,i.height+=r):"sw"===a?(i.x+=r,i.width-=r,i.height-=r):"s"===a?i.height-=r:"se"===a&&(i.width-=r,i.height-=r):"ArrowDown"===t&&("nw"===a?(i.x+=r,i.y+=r,i.width-=r,i.height-=r):"n"===a?(i.y+=r,i.height-=r):"ne"===a?(i.y+=r,i.width-=r,i.height-=r):"sw"===a?(i.x-=r,i.width+=r,i.height+=r):"s"===a?i.height+=r:"se"===a&&(i.width+=r,i.height+=r)),i}(y,t.key,b,r),v=p(f,a,r,x.width,x.height,l,d,s,o);if(!m(i,v)){let e=u(v,x.width,x.height);c(v,e),g&&g(v,e)}},this.onDocPointerDone=e=>{let{crop:t,disabled:r,onComplete:a,onDragEnd:i}=this.props,n=this.getBox();this.unbindDocMove(),!(r||!t)&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,i&&i(e),a&&a(h(t,n.width,n.height),u(t,n.width,n.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))},this.onDragFocus=e=>{var t;null==(t=this.componentRef.current)||t.scrollTo(0,0)}}get document(){return document}getBox(){let e=this.mediaRef.current;if(!e)return{x:0,y:0,width:0,height:0};let{x:t,y:r,width:a,height:i}=e.getBoundingClientRect();return{x:t,y:r,width:a,height:i}}componentDidUpdate(e){let{crop:t,onComplete:r}=this.props;if(r&&!e.crop&&t){let{width:e,height:a}=this.getBox();e&&a&&r(h(t,e,a),u(t,e,a))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,g),this.document.addEventListener("pointerup",this.onDocPointerDone,g),this.document.addEventListener("pointercancel",this.onDocPointerDone,g),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,g),this.document.removeEventListener("pointerup",this.onDocPointerDone,g),this.document.removeEventListener("pointercancel",this.onDocPointerDone,g),this.docMoveBound=!1)}getCropStyle(){let{crop:e}=this.props;if(e)return{top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`}}dragCrop(){let{evData:e}=this,t=this.getBox(),r=this.makePixelCrop(t),a=e.clientX-e.startClientX,i=e.clientY-e.startClientY;return r.x=o(e.startCropX+a,0,t.width-r.width),r.y=o(e.startCropY+i,0,t.height-r.height),r}getPointRegion(e,t,r,a){let i;let{evData:n}=this,l=n.clientX-e.x,d=n.clientY-e.y;return i=a&&t?"nw"===t||"n"===t||"ne"===t:d<n.startCropY,(r&&t?"nw"===t||"w"===t||"sw"===t:l<n.startCropX)?i?"nw":"sw":i?"ne":"se"}resolveMinDimensions(e,t,r=0,a=0){let i=Math.min(r,e.width),n=Math.min(a,e.height);return t&&(i||n)?t>1?i?[i,i/t]:[n*t,n]:n?[n*t,n]:[i,i/t]:[i,n]}resizeCrop(){let{evData:t}=this,{aspect:r=0,maxWidth:a,maxHeight:i}=this.props,n=this.getBox(),[l,d]=this.resolveMinDimensions(n,r,this.props.minWidth,this.props.minHeight),s=this.makePixelCrop(n),c=this.getPointRegion(n,t.ord,l,d),m=t.ord||c,u=t.clientX-t.startClientX,h=t.clientY-t.startClientY;(l&&"nw"===m||"w"===m||"sw"===m)&&(u=Math.min(u,-l)),(d&&"nw"===m||"n"===m||"ne"===m)&&(h=Math.min(h,-d));let g={unit:"px",x:0,y:0,width:0,height:0};"ne"===c?(g.x=t.startCropX,g.width=u,r?(g.height=g.width/r,g.y=t.startCropY-g.height):(g.height=Math.abs(h),g.y=t.startCropY-g.height)):"se"===c?(g.x=t.startCropX,g.y=t.startCropY,g.width=u,r?g.height=g.width/r:g.height=h):"sw"===c?(g.x=t.startCropX+u,g.y=t.startCropY,g.width=Math.abs(u),r?g.height=g.width/r:g.height=h):"nw"===c&&(g.x=t.startCropX+u,g.width=Math.abs(u),r?(g.height=g.width/r,g.y=t.startCropY-g.height):(g.height=Math.abs(h),g.y=t.startCropY+h));let x=p(g,r,c,n.width,n.height,l,d,a,i);return r||e.xyOrds.indexOf(m)>-1?s=x:e.xOrds.indexOf(m)>-1?(s.x=x.x,s.width=x.width):e.yOrds.indexOf(m)>-1&&(s.y=x.y,s.height=x.height),s.x=o(s.x,0,n.width-s.width),s.y=o(s.y,0,n.height-s.height),s}createCropSelection(){let{ariaLabels:t=e.defaultProps.ariaLabels,disabled:r,locked:a,renderSelectionAddon:n,ruleOfThirds:l,crop:d}=this.props,s=this.getCropStyle();if(d)return i.createElement("div",{style:s,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":t.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!r&&!a&&i.createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},i.createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),i.createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),i.createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),i.createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),i.createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":t.nwDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"nw"),role:"button"}),i.createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":t.nDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"n"),role:"button"}),i.createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":t.neDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"ne"),role:"button"}),i.createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":t.eDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"e"),role:"button"}),i.createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":t.seDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"se"),role:"button"}),i.createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":t.sDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"s"),role:"button"}),i.createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":t.swDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"sw"),role:"button"}),i.createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":t.wDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"w"),role:"button"})),n&&i.createElement("div",{className:"ReactCrop__selection-addon",onMouseDown:e=>e.stopPropagation()},n(this.state)),l&&i.createElement(i.Fragment,null,i.createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),i.createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}makePixelCrop(e){let t={...s,...this.props.crop||{}};return h(t,e.width,e.height)}render(){let{aspect:e,children:t,circularCrop:r,className:a,crop:n,disabled:l,locked:d,style:s,ruleOfThirds:o}=this.props,{cropIsActive:m,newCropIsBeingDrawn:u}=this.state,h=n?this.createCropSelection():null,p=c("ReactCrop",a,m&&"ReactCrop--active",l&&"ReactCrop--disabled",d&&"ReactCrop--locked",u&&"ReactCrop--new-crop",n&&e&&"ReactCrop--fixed-aspect",n&&r&&"ReactCrop--circular-crop",n&&o&&"ReactCrop--rule-of-thirds",!this.dragStarted&&n&&!n.width&&!n.height&&"ReactCrop--invisible-crop",r&&"ReactCrop--no-animate");return i.createElement("div",{ref:this.componentRef,className:p,style:s},i.createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},t),h)}};x.xOrds=["e","w"],x.yOrds=["n","s"],x.xyOrds=["nw","ne","se","sw"],x.nudgeStep=1,x.nudgeStepMedium=10,x.nudgeStepLarge=100,x.defaultProps={ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}},r(7929);var b=function(e){let{files:t,setFile:r,existingImages:n=[],setExistingImages:s,maxFiles:o=5,maxSizeMB:c=2}=e,[m,p]=(0,i.useState)(),[g,b]=(0,i.useState)(""),[y,f]=(0,i.useState)(null),[v,k]=(0,i.useState)(!1),w=((null==n?void 0:n.length)||0)+((null==t?void 0:t.length)||0),j=e=>{let a=Array.from(e.target.files),i=["image/gif","image/jpeg","image/png"];if(0===a.length)return;if(v){d.Am.info("Please confirm or cancel the current crop before adding more images."),e.target.value=null;return}if(w>=o){d.Am.error("You can upload a maximum of ".concat(o," images.")),e.target.value=null;return}if(1===a.length){let t=a[0];if(!i.includes(t.type)){d.Am.error("".concat(t.name," is not a supported image type.")),e.target.value=null;return}let r=t.size/1048576;if(r>c){d.Am.error("".concat(t.name," exceeds ").concat(c,"MB limit.")),e.target.value=null;return}if(w+1>o){d.Am.error("Adding this image would exceed the maximum of ".concat(o," images.")),e.target.value=null;return}f(t);let n=new FileReader;n.addEventListener("load",()=>{var e;b((null===(e=n.result)||void 0===e?void 0:e.toString())||""),k(!0),p(void 0)}),n.readAsDataURL(t);return}let l=[],s=(null==t?void 0:t.length)||0;for(let e of a){if(((null==n?void 0:n.length)||0)+s>=o){d.Am.warn("Cannot add ".concat(e.name,". Maximum of ").concat(o," images reached."));break}if(!i.includes(e.type)){d.Am.error("".concat(e.name," is not a supported image type."));continue}let t=e.size/1048576;if(t>c){d.Am.error("".concat(e.name," exceeds ").concat(c,"MB limit."));continue}l.push(e),s++}if(l.length>0){let e=((null==n?void 0:n.length)||0)+((null==t?void 0:t.length)||0)+l.length;if(e>o){let e=o-(((null==n?void 0:n.length)||0)+((null==t?void 0:t.length)||0));d.Am.warn("You can only add ".concat(e," more image(s). Some files were not added.")),r([...t||[],...l.slice(0,e)])}else r([...t||[],...l])}e.target.value=null},N=e=>{r(t.filter(t=>t.name!==e))},C=e=>{"function"==typeof s&&s(e)},D=(0,i.useCallback)(e=>{let{width:t,height:r}=e.currentTarget;if(0===t||0===r)return;let a=function(e,t,r){let a=h(e,t,r);return a.x=(t-a.width)/2,a.y=(r-a.height)/2,"%"===e.unit?u(a,t,r):a}(function(e,t,r,a){let i=h(e,r,a);return e.width&&(i.height=i.width/t),e.height&&(i.width=i.height*t),i.y+i.height>a&&(i.height=a-i.y,i.width=i.height*t),i.x+i.width>r&&(i.width=r-i.x,i.height=i.width/t),"%"===e.unit?u(i,r,a):i}({unit:"%",width:90},1,t,r),t,r);p(a)},[]),P=async()=>{if(m&&y&&g&&m.width&&m.height)try{let e=await A(g,m,y.name),a=new File([e],y.name,{type:e.type,lastModified:Date.now()});r([...t||[],a]),k(!1),b(""),f(null),p(void 0),d.Am.success('"'.concat(a.name,'" cropped and added.'))}catch(e){console.error("Cropping error:",e),d.Am.error("Error cropping image. Please try again."),k(!1),b(""),f(null),p(void 0)}else d.Am.warn("Crop selection is not valid.");let e=document.querySelector('input[type="file"][name="files[]"]');e&&(e.value=null)},S=()=>{k(!1),b(""),f(null),p(void 0),d.Am.info("Image cropping cancelled.");let e=document.querySelector('input[type="file"][name="files[]"]');e&&(e.value=null)};async function A(e,t,r){return new Promise((r,a)=>{let i=document.createElement("img");i.src=e,i.onload=()=>{let e=document.createElement("canvas");if(0===i.naturalWidth||0===i.naturalHeight||!i.width||!i.height)return a(Error("Image has no dimensions or has not loaded properly."));if(!t||"number"!=typeof t.width||"number"!=typeof t.height||"number"!=typeof t.x||"number"!=typeof t.y)return a(Error("Invalid crop dimensions."));let n=i.naturalWidth/i.width,l=i.naturalHeight/i.height;e.width=Math.floor(t.width*n),e.height=Math.floor(t.height*l);let d=e.getContext("2d");if(!d)return a(Error("Failed to get 2D context from canvas."));d.drawImage(i,t.x*n,t.y*l,t.width*n,t.height*l,0,0,e.width,e.height),e.toBlob(e=>{if(!e)return a(Error("Canvas to Blob conversion failed."));r(e)},"image/jpeg",.9)},i.onerror=e=>{console.error("Image load error for cropping:",e),a(Error("Image failed to load for cropping."))}})}return(0,a.jsxs)("div",{children:[v&&g&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex flex-col items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-xl max-w-xl w-full",children:[(0,a.jsx)("p",{className:"text-xl font-semibold text-center mb-4 text-gray-800 dark:text-gray-200",children:"Crop Image"}),(0,a.jsx)("div",{style:{width:"100%",maxHeight:"60vh",overflow:"auto",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,a.jsx)(x,{crop:m,onChange:(e,t)=>p(t),onComplete:e=>p(e),aspect:1,minWidth:100,minHeight:100,children:(0,a.jsx)("img",{src:g,onLoad:D,alt:"Crop preview",style:{display:"block",maxHeight:"55vh",maxWidth:"100%",objectFit:"contain"}})})}),(0,a.jsxs)("div",{className:"flex justify-center gap-4 mt-6",children:[(0,a.jsx)("button",{type:"button",onClick:P,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm font-medium",children:"Confirm Crop"}),(0,a.jsx)("button",{type:"button",onClick:S,className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition-colors text-sm font-medium dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:"Cancel"})]})]})}),(0,a.jsxs)("div",{className:"flex items-center px-3 ".concat(v?"hidden":""),children:[" ",(0,a.jsx)("div",{className:"rounded-lg bg-gray-50 dark:bg-slate-800 w-full",children:(0,a.jsxs)("div",{className:"m-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,a.jsxs)("label",{className:"flex cursor-pointer flex-col w-full h-32 border-2 rounded-md border-dashed border-gray-300 dark:border-gray-600 ".concat(w>=o?"opacity-50 cursor-not-allowed":"hover:bg-gray-100 dark:hover:bg-gray-700 hover:border-gray-400 dark:hover:border-gray-500"),children:[(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center pt-7",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-12 h-12 text-gray-400 dark:text-neutral-light group-hover:text-gray-500 dark:group-hover:text-gray-300",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),(0,a.jsx)("p",{className:"pt-1 text-sm tracking-wider text-gray-400 dark:text-neutral-light group-hover:text-gray-500 dark:group-hover:text-gray-300",children:w>=o?"Max images reached":(null==t?void 0:t.length)>0?"Add more photos":"Select a photo (or more)"})]}),(0,a.jsx)("input",{type:"file",onChange:j,className:"opacity-0",multiple:!0,name:"files[]",accept:"image/png, image/jpeg, image/gif",disabled:w>=o||v})]})}),n&&n.length>0&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-1",children:"Current Images:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:n.map((e,t)=>(0,a.jsxs)("div",{className:"overflow-hidden relative group",children:[(0,a.jsx)("button",{type:"button",onClick:()=>C(e),className:"absolute top-0.5 right-0.5 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity z-10 hover:bg-red-600","aria-label":"Remove existing image",children:"✕"}),(0,a.jsx)("div",{className:"relative h-20 w-20 rounded-md border border-gray-200 dark:border-gray-600",children:(0,a.jsx)(l(),{src:e,layout:"fill",alt:"Existing Service Image",className:"object-cover rounded-md"})})]},"existing-".concat(t)))})]}),t&&t.length>0&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-1",children:"New Images to Upload:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:t.map((e,t)=>(0,a.jsxs)("div",{className:"overflow-hidden relative group",children:[(0,a.jsx)("button",{type:"button",onClick:()=>N(e.name),className:"absolute top-0.5 right-0.5 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity z-10 hover:bg-red-600","aria-label":"Remove new image",children:"✕"}),(0,a.jsx)("div",{className:"relative h-20 w-20 rounded-md border border-gray-200 dark:border-gray-600",children:(0,a.jsx)(l(),{src:URL.createObjectURL(e),layout:"fill",alt:"New Service Image",className:"object-cover rounded-md"})})]},"new-".concat(t)))})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 dark:text-neutral-light mt-2 text-center",children:[w,"/",o," images"]})]})})]})]})},y=r(7599),f=r(9611);let v=[{value:"yes",label:"Yes"},{value:"no",label:"No"},{value:"addon",label:"Available as Add-on"}],k=[{name:"title",label:"Title",type:"text",required:!0,placeholder:"e.g., Full Day Wedding Photography Service"},{name:"description",label:"Description",type:"textarea",required:!0,placeholder:"Describe your service, approach, and what makes you unique."},{name:"languagesSpoken",label:"Languages Spoken",type:"multi-select",required:!0,options:[{value:"english",label:"English"},{value:"mandarin",label:"Mandarin Chinese"},{value:"malay",label:"Malay"},{value:"tamil",label:"Tamil"},{value:"hindi",label:"Hindi"}]},{name:"experienceYears",label:"Years of Experience",type:"select",required:!0,options:[{value:"0-1",label:"Less than 1 year"},{value:"1-3",label:"1-3 years"},{value:"3-5",label:"3-5 years"},{value:"5-10",label:"5-10 years"},{value:"10+",label:"10+ years"}]},{name:"cancellationPolicy",label:"Cancellation Policy",type:"select",required:!0,options:[{value:"flexible_7_day",label:"Flexible (Full refund if canceled within 7 days)"},{value:"standard_30_day",label:"Standard (Full refund if canceled within 30 days)"},{value:"strict_90_day",label:"Strict (Full refund if canceled within 90 days)"}]},{name:"availableDays",label:"Available Days of the Week",type:"multi-select",required:!0,options:[{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"}],helpText:"Select the regular days your service is typically available. Specify public holiday availability separately below."},{name:"availableOnPublicHolidays",label:"Available on Singapore Public Holidays?",type:"toggle",required:!0,helpText:"Specify if your service can be booked on Singapore public holidays."}],w={"Wedding Photographer":[{name:"numberOfPhotographers",label:"Number of Photographers",type:"integer",required:!1,placeholder:"e.g., 1 or 2",min:1},{name:"photoDeliveryTime",label:"Photo Delivery Time",type:"text",required:!1,placeholder:"e.g., 4-6 weeks"},{name:"numberOfEditedPhotos",label:"Number of Edited Photos",type:"text",required:!1,placeholder:"e.g., Approx. 500"},{name:"rawPhotosIncluded",label:"Raw Photos Included?",type:"select",required:!1,options:v},{name:"deliveryFormat",label:"Photo Delivery Format",type:"multi-select",required:!1,options:[{value:"online_gallery",label:"Online Gallery"},{value:"usb_drive",label:"USB Drive"},{value:"digital_download",label:"Digital Download Link"}]}],"Wedding Videographer":[{name:"numberOfVideographers",label:"Number of Videographers",type:"integer",required:!1,placeholder:"e.g., 1 or 2",min:1},{name:"videoLengthEstimate",label:"Estimated Video Length",type:"text",required:!1,placeholder:"e.g., 3-5 min highlight, 20 min feature"},{name:"sameDayEdit",label:"Same Day Edit Available?",type:"select",required:!1,options:v},{name:"droneUsage",label:"Drone Usage Included?",type:"select",required:!1,options:v},{name:"videoDeliveryTime",label:"Video Delivery Time",type:"text",required:!1,placeholder:"e.g., 6-8 weeks"}],"Bridal Makeup Artist":[{name:"trialMakeupIncluded",label:"Trial Makeup Session Included?",type:"select",required:!1,options:v},{name:"touchUpService",label:"On-site Touch-up Service?",type:"select",required:!1,options:v},{name:"brandsUsed",label:"Brands of Makeup Used",type:"text",required:!1,placeholder:"e.g., MAC, Dior, NARS (Optional)"},{name:"additionalPaxMakeup",label:"Makeup for Additional Pax (e.g., Bridesmaids)?",type:"select",required:!1,options:v}],"Wedding Emcee":[{name:"hostingStyle",label:"Hosting Style",type:"text",required:!1,placeholder:"e.g., Bilingual, Humorous, Formal"},{name:"programConsultation",label:"Program Consultation Included?",type:"select",required:!1,options:v},{name:"scriptWriting",label:"Script Writing Assistance?",type:"select",required:!1,options:v}],"Wedding Band":[{name:"bandSize",label:"Number of Musicians/Vocalists",type:"text",required:!1,placeholder:"e.g., 2-piece, 5-piece"},{name:"musicGenres",label:"Music Genres Offered",type:"text",required:!1,placeholder:"e.g., Pop, Jazz, Ballads"},{name:"soundSystemProvided",label:"Sound System Provided?",type:"select",required:!1,options:v}],"Wedding Decorator":[{name:"decorThemeConsultation",label:"Theme Consultation Included?",type:"select",required:!1,options:v},{name:"packageOptions",label:"Available Decor Package Options",type:"textarea",required:!1,placeholder:"e.g., Stage setup, Floral arrangements, Aisle decor. Describe basic packages or customization options."},{name:"setupTearDownIncluded",label:"Setup & Teardown Included?",type:"select",required:!1,options:v}],"ROM Solemnizer":[{name:"solemnizationStyle",label:"Solemnization Style",type:"text",required:!1,placeholder:"e.g., Modern, Traditional, Bilingual"},{name:"scriptCustomization",label:"Vow/Script Customization Offered?",type:"select",required:!1,options:v},{name:"preMeeting",label:"Pre-Solemnization Meeting?",type:"select",required:!1,options:v}],"Wedding Planner":[{name:"planningScope",label:"Scope of Planning Services",type:"multi-select",required:!1,options:[{value:"full",label:"Full Planning"},{value:"partial",label:"Partial Planning"},{value:"day_of",label:"Day-of Coordination"}]},{name:"vendorCoordination",label:"Vendor Coordination Included?",type:"select",required:!1,options:v},{name:"budgetManagement",label:"Budget Management Assistance?",type:"select",required:!1,options:v}],"Photo Booth Services":[{name:"boothType",label:"Type of Photo Booth",type:"text",required:!1,placeholder:"e.g., Open-air, Enclosed, Mirror Booth"},{name:"propsIncluded",label:"Props Included?",type:"select",required:!1,options:v},{name:"instantPrints",label:"Instant Prints Available?",type:"select",required:!1,options:v},{name:"customBackdrop",label:"Custom Backdrop Option?",type:"select",required:!1,options:v}],"Live Painter":[{name:"paintingStyle",label:"Painting Style",type:"text",required:!1,placeholder:"e.g., Impressionistic, Realistic, Caricature"},{name:"canvasSize",label:"Typical Canvas Size",type:"text",required:!1,placeholder:"e.g., 16x20 inches"},{name:"paintingCompletionTime",label:"On-site Painting Completion Time",type:"text",required:!1,placeholder:"e.g., Completed during event, or studio touch-up"}],Florist:[{name:"floralArrangementTypes",label:"Types of Arrangements Offered",type:"textarea",required:!1,placeholder:"e.g., Bridal bouquet, Corsages, Table centerpieces, Arch decor"},{name:"flowerTypes",label:"Commonly Used Flower Types",type:"text",required:!1,placeholder:"e.g., Roses, Lilies, Orchids (Optional)"},{name:"deliveryAndSetup",label:"Delivery and Setup Included?",type:"select",required:!1,options:v}],"Gown Rental":[{name:"gownStyles",label:"Available Gown Styles",type:"textarea",required:!1,placeholder:"e.g., A-line, Ballgown, Mermaid, Cheongsam"},{name:"alterationIncluded",label:"Basic Alteration Included?",type:"select",required:!1,options:v},{name:"rentalDuration",label:"Standard Rental Duration",type:"text",required:!1,placeholder:"e.g., 3 days, 5 days"},{name:"accessoriesIncluded",label:"Accessories Included (Veil, Petticoat)?",type:"select",required:!1,options:v}],"Suit Tailor":[{name:"suitTypes",label:"Types of Suits Offered",type:"textarea",required:!1,placeholder:"e.g., 2-piece, 3-piece, Tuxedo, Bespoke, Made-to-Measure"},{name:"fabricOptions",label:"Fabric Options Available",type:"text",required:!1,placeholder:"e.g., Wool, Linen, Cotton blends (Optional)"},{name:"fittingsRequired",label:"Number of Fittings Typically Required",type:"integer",required:!1,placeholder:"e.g., 2-3",min:0},{name:"leadTime",label:"Typical Lead Time for Suit Completion",type:"text",required:!1,placeholder:"e.g., 4-8 weeks"}],"Catering Services":[{name:"cuisineTypes",label:"Cuisine Types Offered",type:"textarea",required:!1,placeholder:"e.g., Chinese, Western, International Buffet, Halal options"},{name:"menuCustomization",label:"Menu Customization Available?",type:"select",required:!1,options:v},{name:"foodTasting",label:"Food Tasting Session Provided?",type:"select",required:!1,options:v},{name:"staffingIncluded",label:"Service Staff Included?",type:"select",required:!1,options:v},{name:"tablewareSetup",label:"Tableware and Setup Included?",type:"select",required:!1,options:v}]},j=[{id:"consultation_pre",label:"Pre-Event Consultation"},{id:"high_res_photos",label:"High-Resolution Edited Photos"},{id:"online_gallery",label:"Online Gallery (Client Access)"},{id:"timeline_planning",label:"Timeline Planning Assistance"}],N=[{id:"extra_hour_service",label:"Additional Hour of Service",defaultPrice:"100",defaultDescription:"One extra hour of on-site service."},{id:"raw_footage_access",label:"Raw Footage/Photos Access",defaultPrice:"150",defaultDescription:"Access to all unedited (RAW) footage or photos."},{id:"express_delivery",label:"Express Delivery of Final Product",defaultPrice:"200",defaultDescription:"Final product delivered in half the standard time."},{id:"second_photographer",label:"Second Photographer/Assistant",defaultPrice:"300",defaultDescription:"Ensures more coverage and different angles."}],C={maxTiers:3,defaultTierNames:["Basic","Standard","Premium"],fieldsPerTier:[{name:"tierName",label:"Package Name",type:"text",required:!0},{name:"tierPrice",label:"Price",type:"number",required:!0},{name:"tierDurationHours",label:"Duration in this Package (Hours)",type:"number",required:!1},{name:"tierDescription",label:"Description of this Package",type:"textarea",required:!1},{name:"tierInclusions",label:"What's Included in this Package",type:"hybridList",predefinedOptions:j,required:!1}]},D={fieldsPerAddon:[{name:"addonName",label:"Add-on Service/Item",type:"hybridInput",predefinedOptions:N,required:!0},{name:"addonPrice",label:"Price for this Add-on",type:"number",required:!0},{name:"addonDescription",label:"Brief Description of Add-on",type:"textarea",required:!1}]},P=e=>{let t=w[e]||[];return!w[e]&&e&&console.warn('No specific fields defined for category: "'.concat(e,'". Returning common fields only.')),[...k,...t]},S="w-full px-4 py-3 border border-neutral-medium/50 dark:border-neutral-medium rounded-lg bg-neutral-light dark:bg-neutral-dark text-neutral-dark dark:text-neutral-light placeholder-neutral-medium dark:placeholder-neutral-medium focus:ring-primary focus:border-primary",A=k.filter(e=>"category"!==e.name&&"description"!==e.name&&"title"!==e.name),q=e=>{let{field:t,value:r,onChange:i,onDynamicChange:n,error:l}=e,{name:d,label:s,type:o,required:c,placeholder:m,options:u,helpText:h,...p}=t,g="".concat(S," ").concat(l?"border-error":"");switch(o){case"text":case"number":case"integer":case"date":let x=o,b=p.inputMode;return"integer"===o?(x="text",b="numeric"):"number"===o&&(x="text",b="decimal"),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:d,className:"block text-sm font-medium mb-1 text-neutral-dark dark:text-neutral-light",children:[s,c&&"*"]}),(0,a.jsx)("input",{type:x,inputMode:b,id:d,name:d,value:r||"",onChange:n?e=>n(d,e.target.value):i,onKeyDown:e=>{"integer"===o?e.key>="0"&&e.key<="9"||"Backspace"===e.key||"Delete"===e.key||"Tab"===e.key||"ArrowLeft"===e.key||"ArrowRight"===e.key||"Enter"===e.key||e.ctrlKey||e.metaKey||e.preventDefault():"number"!==o||(["e","E","+","-"].includes(e.key)||"."===e.key&&(r||"").toString().includes(".")?e.preventDefault():e.key>="0"&&e.key<="9"||"."===e.key||"Backspace"===e.key||"Delete"===e.key||"Tab"===e.key||"ArrowLeft"===e.key||"ArrowRight"===e.key||"Enter"===e.key||e.ctrlKey||e.metaKey||e.preventDefault())},placeholder:m,required:c,className:g,...p}),h&&!l&&(0,a.jsx)("p",{className:"mt-1 text-xs text-neutral-medium dark:text-neutral-light",children:h}),l&&(0,a.jsx)("p",{className:"text-error text-xs mt-1",children:l})]});case"textarea":return(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:d,className:"block text-sm font-medium mb-1 text-neutral-dark dark:text-neutral-light",children:[s,c&&"*"]}),(0,a.jsx)("textarea",{id:d,name:d,value:r||"",onChange:n?e=>n(d,e.target.value):i,placeholder:m,required:c,rows:4,className:g,...p}),h&&!l&&(0,a.jsx)("p",{className:"mt-1 text-xs text-neutral-medium dark:text-neutral-medium",children:h}),l&&(0,a.jsx)("p",{className:"text-error text-xs mt-1",children:l})]});case"select":return(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:d,className:"block text-sm font-medium mb-1 text-neutral-dark dark:text-neutral-light",children:[s,c&&"*"]}),(0,a.jsxs)("select",{id:d,name:d,value:r||"",onChange:n?e=>n(d,e.target.value):i,required:c,className:g,...p,children:[(0,a.jsxs)("option",{value:"",children:["Select ",s.toLowerCase()]}),null==u?void 0:u.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))]}),h&&!l&&(0,a.jsx)("p",{className:"mt-1 text-xs text-neutral-medium dark:text-neutral-light",children:h}),l&&(0,a.jsx)("p",{className:"text-error text-xs mt-1",children:l})]});case"multi-select":return(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1 text-neutral-dark dark:text-neutral-light",children:[s,c&&"*"]}),(0,a.jsx)("div",{className:"space-y-2 mt-2 p-2 rounded-md ".concat(l?"border border-error":""),children:null==u?void 0:u.map(e=>(0,a.jsxs)("label",{className:"flex items-center text-neutral-dark dark:text-neutral-light",children:[(0,a.jsx)("input",{type:"checkbox",name:d,value:e.value,checked:Array.isArray(r)&&r.includes(e.value),onChange:t=>{let a=Array.isArray(r)?[...r]:[];if(t.target.checked)a.push(e.value);else{let t=a.indexOf(e.value);t>-1&&a.splice(t,1)}n&&n(d,a)},className:"h-4 w-4 text-primary border-neutral-medium/50 rounded focus:ring-primary mr-2"}),e.label]},e.value))}),h&&!l&&(0,a.jsx)("p",{className:"mt-1 text-xs text-neutral-medium dark:text-neutral-light",children:h}),l&&(0,a.jsx)("p",{className:"text-error text-xs mt-1",children:l})]});case"toggle":let y="yes"===r;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:d,className:"block text-sm font-medium mb-1 text-neutral-dark dark:text-neutral-light",children:[s,c&&"*"]}),(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",id:d,name:d,checked:y,onChange:e=>{let t=e.target.checked?"yes":"no";n?n(d,t):i&&i({target:{name:d,value:t}})},className:"sr-only peer"}),(0,a.jsx)("div",{className:"w-11 h-6 bg-neutral-medium/50 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-light dark:peer-focus:ring-accent rounded-full peer dark:bg-neutral-medium dark:border dark:border-neutral-light peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-neutral-medium/50 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary ".concat(l?"ring-2 ring-error":"")}),(0,a.jsx)("span",{className:"ml-3 text-sm font-medium text-neutral-dark dark:text-neutral-light",children:y?"Yes":"No"})]}),h&&!l&&(0,a.jsx)("p",{className:"mt-1 text-xs text-neutral-medium dark:text-neutral-light",children:h}),l&&(0,a.jsx)("p",{className:"text-error text-xs mt-1",children:l})]});case"boolean":return(0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)("input",{type:"checkbox",id:d,name:d,checked:!!r,onChange:n?e=>n(d,e.target.checked):e=>i({target:{name:d,value:e.target.checked}}),className:"h-4 w-4 text-primary border-neutral-medium/50 rounded focus:ring-primary mr-2"}),(0,a.jsx)("label",{htmlFor:d,className:"text-sm font-medium text-neutral-dark dark:text-neutral-light",children:s}),h&&(0,a.jsx)("p",{className:"ml-2 text-xs text-neutral-medium dark:text-neutral-light",children:h}),l&&(0,a.jsx)("p",{className:"text-error text-xs mt-1",children:l})]});default:return(0,a.jsxs)("p",{children:["Unsupported field type: ",o]})}},_=e=>{var t;let{initialData:r={},onSubmit:n,isEditMode:l=!1,serviceId:s=null,user:o=null,setParentLoading:c=()=>{}}=e,[m,u]=(0,i.useState)(1),[h,p]=(0,i.useState)(()=>{let e=r||{};if(e.tiers&&Array.isArray(e.tiers)){let t=e.tiers.map(e=>({...e,id:e.id||"tier-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))}));return{...e,tiers:t}}return e}),[g,x]=(0,i.useState)([]),[v,w]=(0,i.useState)(()=>r&&r.images?[...r.images]:[]),[_,I]=(0,i.useState)([]),[M,E]=(0,i.useState)(""),[R,T]=(0,i.useState)({}),[O,B]=(0,i.useState)(!1);(0,i.useEffect)(()=>{if(h.category){let e=P(h.category),t=e.filter(e=>!k.some(t=>t.name===e.name&&"title"!==t.name&&"description"!==t.name&&"category"!==t.name));I(t)}else I([])},[h.category]);let H=()=>{let e={};switch(m){case 1:var t,r;(null===(t=h.title)||void 0===t?void 0:t.trim())||(e.title="Service Title is required."),h.category||(e.category="Category is required."),(null===(r=h.description)||void 0===r?void 0:r.trim())||(e.description="Detailed Description is required."),0===v.length&&0===g.length&&(e.images="At least one image is required for the service."),k.forEach(t=>{if(t.required){let r=h[t.name];"multi-select"===t.type?(!r||Array.isArray(r)&&0===r.length)&&(e[t.name]="".concat(t.label," is required.")):"number"===t.type?(null==r||""===r)&&(e[t.name]="".concat(t.label," is required.")):r&&("string"!=typeof r||r.trim())||(e[t.name]="".concat(t.label," is required."))}});break;case 2:e={},_.forEach(t=>{if(t.required){let r=h[t.name];"multi-select"===t.type?(!r||Array.isArray(r)&&0===r.length)&&(e[t.name]="".concat(t.label," is required.")):"number"===t.type?(null==r||""===r)&&(e[t.name]="".concat(t.label," is required.")):r&&("string"!=typeof r||r.trim())||(e[t.name]="".concat(t.label," is required."))}});break;case 3:e={},h.tiers&&0!==h.tiers.length?h.tiers.forEach((t,r)=>{C.fieldsPerTier.forEach(a=>{if(a.required){let i=t[a.name];"number"===a.type?(null==i||""===i)&&(e["tier_".concat(r,"_").concat(a.name)]="Package ".concat(r+1,": ").concat(a.label," is required.")):i&&("string"!=typeof i||i.trim())||(e["tier_".concat(r,"_").concat(a.name)]="Package ".concat(r+1,": ").concat(a.label," is required."))}})}):e.tiers_general="At least one service package (tier) is required.";break;case 4:e={},(h.addons||[]).forEach((t,r)=>{if(t.isCustom){var a;(null===(a=t.addonName)||void 0===a?void 0:a.trim())||(e["addon_".concat(r,"_addonName")]="Add-on ".concat(r+1,": Custom name is required."))}else t.predefinedId||(e["addon_".concat(r,"_predefinedId")]="Add-on ".concat(r+1,": Predefined service selection is required."));D.fieldsPerAddon.forEach(a=>{if(a.required&&(t.isCustom||"addonName"!==a.name)){let i=t[a.name];"number"===a.type?(null==i||""===i)&&(e["addon_".concat(r,"_").concat(a.name)]="Add-on ".concat(r+1,": ").concat(a.label," is required.")):i&&("string"!=typeof i||i.trim())||(e["addon_".concat(r,"_").concat(a.name)]="Add-on ".concat(r+1,": ").concat(a.label," is required."))}})});break;default:return T({}),!0}return Object.keys(e).length>0?(T(e),!1):(T({}),!0)},F=()=>{H()&&(T({}),u(e=>Math.min(e+1,5)))},Y=()=>{T({}),u(e=>Math.max(e-1,1))},L=e=>{let{name:t,value:r,type:a,checked:i}=e.target;p(e=>({...e,[t]:"checkbox"===a?i:r}))},W=(e,t)=>{p(r=>({...r,[e]:t}))},z=()=>{var e;if(((null===(e=h.tiers)||void 0===e?void 0:e.length)||0)<C.maxTiers){let e="tier-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9));p(t=>{var r,a;return{...t,tiers:[...t.tiers||[],{id:e,tierName:C.defaultTierNames[(null===(r=t.tiers)||void 0===r?void 0:r.length)||0]||"Package ".concat(((null===(a=t.tiers)||void 0===a?void 0:a.length)||0)+1),tierPrice:"",tierDurationHours:"",tierDescription:"",tierInclusions:[]}]}})}},K=e=>{p(t=>({...t,tiers:t.tiers.filter((t,r)=>r!==e)}))},U=(e,t,r)=>{p(a=>{let i=a.tiers.map((a,i)=>{if(i===e){let e=r,i=C.fieldsPerTier.find(e=>e.name===t);return i&&"number"===i.type&&isNaN(e=""===r?"":parseFloat(r))&&""!==r&&(e=r),{...a,[t]:e}}return a});return{...a,tiers:i}})},X=(e,t,r)=>{p(a=>({...a,tiers:a.tiers.map((a,i)=>{if(i===e){let e=[...a.tierInclusions||[]],i=j.find(e=>e.id===t);if(r)i&&!e.find(e=>e.id===t&&e.isPredefined)&&e.push({id:t,label:i.label,isPredefined:!0});else{let r=e.findIndex(e=>e.id===t&&e.isPredefined);r>-1&&e.splice(r,1)}return{...a,tierInclusions:e}}return a})}))},V=e=>{M.trim()&&(p(t=>({...t,tiers:t.tiers.map((t,r)=>r!==e||(t.tierInclusions||[]).some(e=>e.label===M.trim()&&!e.isPredefined)?t:{...t,tierInclusions:[...t.tierInclusions||[],{id:"custom-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),label:M.trim(),isPredefined:!1}]})})),E(""))},$=(e,t)=>{p(r=>({...r,tiers:r.tiers.map((r,a)=>a===e?{...r,tierInclusions:(r.tierInclusions||[]).filter(e=>e.id!==t)}:r)}))},G=()=>{p(e=>({...e,addons:[...e.addons||[],{addonName:"",addonPrice:"",addonDescription:"",isCustom:!0,predefinedId:null}]}))},J=e=>{p(t=>({...t,addons:t.addons.filter((t,r)=>r!==e)}))},Z=function(e,t,r){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];p(i=>({...i,addons:i.addons.map((i,n)=>{if(n===e){if(a){let e=N.find(e=>e.id===r);return{...i,addonName:e?e.label:"",predefinedId:r||null,isCustom:!e,addonPrice:e&&e.defaultPrice||"",addonDescription:e&&e.defaultDescription||""}}return{...i,[t]:r}}return i})}))},Q=(e,t)=>{p(r=>({...r,addons:r.addons.map((r,a)=>{if(a===e){var i;let e={...r,isCustom:t,predefinedId:t?null:r.predefinedId,addonName:t?"":r.predefinedId&&(null===(i=N.find(e=>e.id===r.predefinedId))||void 0===i?void 0:i.label)||"",addonPrice:"",addonDescription:""};return e}return r})}))},ee=e=>{x(e)},et=e=>{w(t=>t.filter(t=>t!==e))},er=async()=>{if(!H()){d.Am.error("Please ensure all required fields are filled correctly.");return}if(B(!0),c(!0),!e.user||!e.user.uid){d.Am.error("User information is missing. Cannot submit the form."),B(!1),c(!1);return}let t=[...v];if(g.length>0)try{let r=await (0,f.eC)(g,e.user.uid);t=[...t,...r]}catch(e){console.error("Error uploading new images:",e),d.Am.error("Failed to upload new images. "+(e.message||"")),B(!1),c(!1);return}let r={...h,images:t},a=(e,t)=>{if(""===e||null==e)return t.required?(t.type,0):null;let r="integer"===t.type?parseInt(e,10):parseFloat(e);return isNaN(r)?(console.warn("Field ".concat(t.name,' with value "').concat(e,'" was NaN after parse. Setting to null or 0 based on requirement.')),t.required?(t.type,0):null):r};r.tiers&&Array.isArray(r.tiers)&&(r.tiers=r.tiers.map(e=>{let t={...e};return C.fieldsPerTier.forEach(e=>{("number"===e.type||"integer"===e.type)&&void 0!==t[e.name]&&(t[e.name]=a(t[e.name],e))}),t})),r.addons&&Array.isArray(r.addons)&&(r.addons=r.addons.map(e=>{let t={...e};return D.fieldsPerAddon.forEach(e=>{("number"===e.type||"integer"===e.type)&&void 0!==t[e.name]&&(t[e.name]=a(t[e.name],e))}),t}));let i=h.category?P(h.category):k;i.forEach(e=>{("number"===e.type||"integer"===e.type)&&void 0!==r[e.name]&&(r[e.name]=a(r[e.name],e))}),await n(r),B(!1),c(!1)};return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"px-4 py-2 bg-neutral-light dark:bg-neutral-dark rounded-lg shadow",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-center text-neutral-dark dark:text-neutral-light",children:["Step ",m," of ",5]}),(0,a.jsx)("div",{className:"mt-1 w-full bg-neutral-medium/30 rounded-full h-2.5 dark:bg-neutral-medium/50",children:(0,a.jsx)("div",{className:"bg-primary h-2.5 rounded-full",style:{width:"".concat(m/5*100,"%")}})})]}),e.error&&!Object.keys(R).length&&(0,a.jsx)("div",{className:"p-4 bg-error/20 dark:bg-red-900/30 border-l-4 border-error dark:border-error rounded-lg",children:(0,a.jsx)("p",{className:"text-sm font-medium text-red-600 dark:text-red-200",children:e.error})}),1===m&&(0,a.jsxs)("section",{className:"space-y-6 p-6 bg-neutral-light dark:bg-neutral-dark shadow rounded-lg",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-neutral-dark dark:text-neutral-light",children:"Step 1: Core Details"}),(0,a.jsx)("div",{children:(0,a.jsx)(q,{field:k.find(e=>"title"===e.name),value:h.title,onDynamicChange:W,error:R.title})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium mb-1 text-neutral-dark dark:text-neutral-light",children:"Category*"}),(0,a.jsx)("p",{className:"text-xs text-neutral-medium dark:text-neutral-light mb-2",children:"Select the category that best describes your service. This will help us tailor the next steps for you."}),(0,a.jsxs)("select",{id:"category",name:"category",value:h.category||"",onChange:L,required:!0,className:"w-full px-4 py-3 border rounded-lg bg-neutral-light dark:bg-neutral-dark text-neutral-dark dark:text-neutral-light focus:ring-primary focus:border-primary ".concat(R.category?"border-error":"border-neutral-medium/50 dark:border-neutral-medium"),children:[(0,a.jsx)("option",{value:"",children:"Select a category"}),y.b.map(e=>(0,a.jsx)("option",{value:e.name,children:e.name},e.name))]}),R.category&&(0,a.jsx)("p",{className:"text-error text-xs mt-1",children:R.category})]}),(0,a.jsx)("div",{children:(0,a.jsx)(q,{field:k.find(e=>"description"===e.name),value:h.description,onDynamicChange:W,error:R.description})}),A.map(e=>(0,a.jsx)("div",{children:(0,a.jsx)(q,{field:e,value:h[e.name],onDynamicChange:W,error:R[e.name]})},"common-".concat(e.name))),l&&(0,a.jsx)("div",{children:(0,a.jsx)(q,{field:{name:"disabled",label:"Disable this service (will be hidden from listings)",type:"boolean"},value:h.disabled,onDynamicChange:W,error:R.disabled})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-neutral-dark dark:text-neutral-light",children:"Images*"}),(0,a.jsx)(b,{files:g,setFile:ee,existingImages:v,setExistingImages:et,maxFiles:5,maxSizeMB:2,isEditMode:l}),R.images&&(0,a.jsx)("p",{className:"text-error text-xs mt-1",children:R.images}),(0,a.jsx)("p",{className:"mt-1 text-xs text-neutral-medium dark:text-neutral-light",children:"Upload images for your service. Max 5 images, 2MB each."})]}),Object.keys(R).length>0&&(0,a.jsx)("div",{className:"p-3 bg-error/10 border border-error/30 rounded-md mt-4",children:(0,a.jsx)("p",{className:"text-sm text-error font-medium",children:"Please correct the errors above before proceeding."})}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("button",{onClick:F,className:"bg-primary hover:bg-primary-darker text-white px-4 py-2 rounded-lg text-sm",children:"Next"})})]}),2===m&&(0,a.jsxs)("section",{className:"space-y-6 p-6 bg-neutral-light dark:bg-neutral-dark shadow rounded-lg",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-neutral-dark dark:text-neutral-light",children:["Step 2: ",h.category?"".concat(h.category," Specifics"):"Category Specifics"]}),h.category?_.length>0?(0,a.jsxs)("div",{className:"p-4 border border-neutral-medium/30 dark:border-neutral-medium/50 rounded-lg bg-neutral-light/50 dark:bg-neutral-dark/30 space-y-4",children:[(0,a.jsxs)("h4",{className:"text-md font-semibold text-neutral-dark dark:text-neutral-light border-b border-neutral-medium/30 pb-2",children:["Specifics for ",h.category]}),(0,a.jsx)("div",{className:"space-y-4",children:_.map(e=>(0,a.jsx)("div",{children:(0,a.jsx)(q,{field:e,value:h[e.name],onDynamicChange:W,error:R[e.name]})},"specific-".concat(e.name)))})]}):(0,a.jsx)("p",{className:"text-neutral-dark dark:text-neutral-light text-sm p-3 bg-sky-100/70 dark:bg-sky-800/30 rounded-md border border-sky-300/50 dark:border-sky-600/50",children:"No specific fields for this category. You can proceed to the next step."}):(0,a.jsx)("p",{className:"text-accent-orange/80 dark:text-accent-orange/90 text-sm p-3 bg-accent-orange/10 dark:bg-accent-orange/20 rounded-md border border-accent-orange/30",children:"Please select a category in Step 1 first."}),Object.keys(R).length>0&&!R.tiers_general&&!R.images&&!R.title&&!R.category&&!R.description&&!k.some(e=>R[e.name])&&(0,a.jsx)("div",{className:"p-3 bg-error/10 border border-error/30 rounded-md mt-4",children:(0,a.jsx)("p",{className:"text-sm text-error font-medium",children:"Please correct the errors above before proceeding."})}),(0,a.jsxs)("div",{className:"flex justify-center mt-6 space-x-4",children:[(0,a.jsx)("button",{onClick:Y,className:"bg-neutral-medium hover:bg-neutral-dark text-white px-4 py-2 rounded-lg text-sm",children:"Previous"}),(0,a.jsx)("button",{onClick:F,className:"bg-primary hover:bg-primary-darker text-white px-4 py-2 rounded-lg text-sm",disabled:!h.category&&0===_.length,children:"Next"})]})]}),3===m&&(0,a.jsxs)("section",{className:"space-y-6 p-6 bg-neutral-light dark:bg-neutral-dark shadow rounded-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-neutral-dark dark:text-neutral-light",children:"Step 3: Service Packages (Tiers)"}),((null===(t=h.tiers)||void 0===t?void 0:t.length)||0)<C.maxTiers&&(0,a.jsx)("button",{type:"button",onClick:z,className:"bg-primary hover:bg-primary-darker text-white px-4 py-2 rounded-lg text-sm",children:"Add Package Tier"})]}),R.tiers_general&&(0,a.jsx)("div",{className:"p-3 bg-error/10 border border-error/30 rounded-md mb-4",children:(0,a.jsx)("p",{className:"text-sm text-error font-medium",children:R.tiers_general})}),(h.tiers||[]).map((e,t)=>{var r,i;return(0,a.jsxs)("div",{className:"p-4 border border-neutral-medium/30 dark:border-neutral-medium/40 rounded-xl shadow-sm bg-neutral-light/30 dark:bg-neutral-dark/20 space-y-5",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-neutral-medium/20 dark:border-neutral-medium/30",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-primary dark:text-primary-light",children:e.tierName||"Package Tier ".concat(t+1)}),(0,a.jsx)("button",{type:"button",onClick:()=>K(t),className:"text-error hover:text-red-700 dark:hover:text-red-400 text-sm font-medium",children:"Remove Tier"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-5",children:C.fieldsPerTier.filter(e=>"tierInclusions"!==e.name).map(r=>(0,a.jsx)("div",{children:(0,a.jsx)(q,{field:r,value:e[r.name],onDynamicChange:(e,r)=>U(t,e,r),error:R["tier_".concat(t,"_").concat(r.name)]})},r.name))}),(0,a.jsxs)("div",{className:"space-y-3 pt-3 border-t border-neutral-medium/20 dark:border-neutral-medium/30",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-neutral-dark dark:text-neutral-light",children:[(null===(r=C.fieldsPerTier.find(e=>"tierInclusions"===e.name))||void 0===r?void 0:r.label)||"Inclusions",(null===(i=C.fieldsPerTier.find(e=>"tierInclusions"===e.name))||void 0===i?void 0:i.required)&&"*"]}),R["tier_".concat(t,"_tierInclusions")]&&(0,a.jsx)("p",{className:"text-error text-xs mb-1",children:R["tier_".concat(t,"_tierInclusions")]}),j.length>0&&(0,a.jsxs)("div",{className:"p-3 border rounded-md bg-neutral-light/20 dark:bg-neutral-dark/10 ".concat(R["tier_".concat(t,"_tierInclusions")]?"border-error":"border-neutral-medium/20 dark:border-neutral-medium/30"),children:[(0,a.jsx)("p",{className:"text-xs font-medium text-neutral-dark dark:text-neutral-light mb-2",children:"Choose from predefined features:"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2",children:j.map(r=>(0,a.jsxs)("label",{className:"flex items-center text-sm text-neutral-dark dark:text-neutral-light",children:[(0,a.jsx)("input",{type:"checkbox",checked:(e.tierInclusions||[]).some(e=>e.id===r.id&&e.isPredefined),onChange:e=>X(t,r.id,e.target.checked),className:"h-4 w-4 text-primary border-neutral-medium/50 rounded focus:ring-primary mr-2"}),r.label]},r.id))})]}),(0,a.jsxs)("div",{className:"pt-2",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-neutral-dark dark:text-neutral-light mb-1",children:"Or add your own custom features for this tier:"}),(0,a.jsxs)("div",{className:"flex flex-wrap sm:flex-nowrap gap-2",children:[(0,a.jsx)("input",{type:"text",value:M,onChange:e=>E(e.target.value),placeholder:"Type custom feature and click Add",className:"flex-1 ".concat(S," text-sm")}),(0,a.jsx)("button",{type:"button",onClick:()=>V(t),className:"bg-accent hover:bg-pink-500 dark:hover:bg-pink-300 text-white px-3 py-2 rounded-lg text-sm shrink-0",children:"Add Custom"})]})]}),(e.tierInclusions||[]).length>0&&(0,a.jsxs)("div",{className:"pt-2",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-neutral-dark dark:text-neutral-light mb-1",children:"Current inclusions for this tier:"}),(0,a.jsx)("ul",{className:"list-disc list-inside pl-1 space-y-1 text-sm text-neutral-dark dark:text-neutral-light bg-neutral-light/30 dark:bg-neutral-dark/20 p-3 rounded-md",children:(e.tierInclusions||[]).map(e=>(0,a.jsxs)("li",{className:"flex justify-between items-center py-0.5",children:[(0,a.jsxs)("span",{children:[e.label," ",!e.isPredefined&&(0,a.jsx)("span",{className:"text-xs text-accent dark:text-pink-400",children:"(Custom)"})]}),(0,a.jsx)("button",{type:"button",onClick:()=>$(t,e.id),className:"text-error hover:text-red-700 dark:hover:text-red-400 text-xs font-medium ml-2",children:"Remove"})]},e.id))})]})]})]},e.id||t)}),Object.keys(R).length>0&&!R.tiers_general&&Object.keys(R).some(e=>e.startsWith("tier_"))&&(0,a.jsx)("div",{className:"p-3 bg-error/10 border border-error/30 rounded-md mt-4",children:(0,a.jsx)("p",{className:"text-sm text-error font-medium",children:"Please correct the errors in the tiers above before proceeding."})}),(0,a.jsxs)("div",{className:"flex justify-center mt-6 space-x-4",children:[(0,a.jsx)("button",{onClick:Y,className:"bg-neutral-medium hover:bg-neutral-dark text-white px-4 py-2 rounded-lg text-sm",children:"Previous"}),(0,a.jsx)("button",{onClick:F,className:"bg-primary hover:bg-primary-darker text-white px-4 py-2 rounded-lg text-sm",children:"Next"})]})]}),4===m&&(0,a.jsxs)("section",{className:"space-y-6 p-6 bg-neutral-light dark:bg-neutral-dark shadow rounded-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-neutral-dark dark:text-neutral-light",children:"Step 4: Optional Add-ons"}),(0,a.jsx)("button",{type:"button",onClick:G,className:"bg-primary hover:bg-primary-darker text-white px-4 py-2 rounded-lg text-sm",children:"Add Add-on"})]}),(h.addons||[]).map((e,t)=>(0,a.jsxs)("div",{className:"p-4 border border-neutral-medium/30 dark:border-neutral-medium/40 rounded-xl shadow-sm bg-neutral-light/30 dark:bg-neutral-dark/20 space-y-5",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-neutral-medium/20 dark:border-neutral-medium/30",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-primary dark:text-primary-light",children:["Add-on ",t+1,e.addonName&&!e.isCustom?": ".concat(e.addonName):""]}),(0,a.jsx)("button",{type:"button",onClick:()=>J(t),className:"text-error hover:text-red-700 dark:hover:text-red-400 text-sm font-medium",children:"Remove Add-on"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-neutral-dark dark:text-neutral-light",children:"Add-on Type:"}),(0,a.jsxs)("div",{className:"flex items-center gap-x-4 gap-y-2 flex-wrap",children:[(0,a.jsxs)("label",{htmlFor:"predefinedType-".concat(t),className:"flex items-center text-sm text-neutral-dark dark:text-neutral-light cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",id:"predefinedType-".concat(t),name:"addonType-".concat(t),checked:!e.isCustom,onChange:()=>Q(t,!1),className:"h-4 w-4 text-primary border-neutral-medium/50 focus:ring-primary mr-1.5"}),"Predefined Service"]}),(0,a.jsxs)("label",{htmlFor:"customType-".concat(t),className:"flex items-center text-sm text-neutral-dark dark:text-neutral-light cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",id:"customType-".concat(t),name:"addonType-".concat(t),checked:e.isCustom||!1,onChange:()=>Q(t,!0),className:"h-4 w-4 text-primary border-neutral-medium/50 focus:ring-primary mr-1.5"}),"Custom Service"]})]}),R["addon_".concat(t,"_addonName")]&&(0,a.jsx)("p",{className:"text-error text-xs mt-1",children:R["addon_".concat(t,"_addonName")]}),R["addon_".concat(t,"_predefinedId")]&&(0,a.jsx)("p",{className:"text-error text-xs mt-1",children:R["addon_".concat(t,"_predefinedId")]}),e.isCustom?(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"customAddonName-".concat(t),className:"block text-xs font-medium text-neutral-dark dark:text-neutral-light mb-1",children:"Custom Add-on Name*"}),(0,a.jsx)("input",{type:"text",id:"customAddonName-".concat(t),placeholder:"Enter custom add-on name",value:e.addonName||"",onChange:e=>Z(t,"addonName",e.target.value),className:"".concat(S," text-sm ").concat(R["addon_".concat(t,"_addonName")]?"border-error":"")})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"predefinedAddonName-".concat(t),className:"block text-xs font-medium text-neutral-dark dark:text-neutral-light mb-1",children:"Select Predefined Add-on*"}),(0,a.jsxs)("select",{id:"predefinedAddonName-".concat(t),value:e.predefinedId||"",onChange:e=>Z(t,"predefinedId",e.target.value,!0),className:"".concat(S," text-sm ").concat(R["addon_".concat(t,"_predefinedId")]?"border-error":""),children:[(0,a.jsx)("option",{value:"",children:"Choose a service..."}),N.map(e=>(0,a.jsx)("option",{value:e.id,children:e.label},e.id))]})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-5 pt-2",children:D.fieldsPerAddon.map(r=>"addonName"!==r.name||e.isCustom?(0,a.jsx)("div",{children:(0,a.jsx)(q,{field:r,value:e[r.name],onDynamicChange:(e,r)=>Z(t,e,r),error:R["addon_".concat(t,"_").concat(r.name)]})},r.name):null)})]},t)),Object.keys(R).length>0&&Object.keys(R).some(e=>e.startsWith("addon_"))&&(0,a.jsx)("div",{className:"p-3 bg-error/10 border border-error/30 rounded-md mt-4",children:(0,a.jsx)("p",{className:"text-sm text-error font-medium",children:"Please correct the errors in the add-ons above before proceeding."})}),(0,a.jsxs)("div",{className:"flex justify-center mt-6 space-x-4",children:[(0,a.jsx)("button",{onClick:Y,className:"bg-neutral-medium hover:bg-neutral-dark text-white px-4 py-2 rounded-lg text-sm",children:"Previous"}),(0,a.jsx)("button",{onClick:F,className:"bg-primary hover:bg-primary-darker text-white px-4 py-2 rounded-lg text-sm",children:"Next"})]})]}),5===m&&(0,a.jsxs)("section",{className:"space-y-8 p-6 bg-neutral-light dark:bg-neutral-dark shadow-xl rounded-lg",children:[(0,a.jsxs)("h2",{className:"text-3xl font-bold text-neutral-darker dark:text-neutral-lighter mb-8 text-center",children:["Step 5 of ",5,": Review your service"]}),(0,a.jsxs)("div",{className:"p-6 border border-neutral-medium/40 dark:border-neutral-medium/60 rounded-xl space-y-4 bg-white dark:bg-neutral-dark/40 shadow-md",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3 pb-3 border-b border-neutral-medium/30 dark:border-neutral-medium/50",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-neutral-dark dark:text-neutral-light",children:"Core details"}),(0,a.jsx)("button",{type:"button",onClick:()=>u(1),className:"text-sm text-primary-dark dark:text-primary-light hover:underline font-medium px-3 py-1 rounded-md hover:bg-primary/10 dark:hover:bg-primary-dark/20 transition-colors",children:"Edit"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{className:"font-semibold text-neutral-dark/90 dark:text-neutral-light/90",children:"Service title:"})," ",(0,a.jsx)("span",{className:"text-neutral-dark/70 dark:text-neutral-light/70",children:h.title||(0,a.jsx)("i",{className:"text-neutral-medium",children:"Not set"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{className:"font-semibold text-neutral-dark/90 dark:text-neutral-light/90",children:"Service category:"})," ",(0,a.jsx)("span",{className:"text-neutral-dark/70 dark:text-neutral-light/70",children:h.category||(0,a.jsx)("i",{className:"text-neutral-medium",children:"Not set"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{className:"font-semibold text-neutral-dark/90 dark:text-neutral-light/90 block mb-1",children:"Description:"}),(0,a.jsx)("p",{className:"text-sm whitespace-pre-wrap p-3 bg-neutral-light/50 dark:bg-neutral-dark/20 rounded-md border border-neutral-medium/20 dark:border-neutral-medium/40 text-neutral-dark/70 dark:text-neutral-light/70",children:h.description||(0,a.jsx)("i",{className:"text-neutral-medium",children:"No description provided."})})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-3 pt-2",children:A.map(e=>{let t=h[e.name],r=e.label.endsWith("*")?e.label.slice(0,-1):e.label;return t="availableDays"===e.name&&Array.isArray(t)?t.map(t=>{let r=e.options.find(e=>e.value===t);return r?r.label:t}).join(", ")||(0,a.jsx)("i",{className:"text-neutral-medium",children:"Not specified"}):"availableOnPublicHolidays"===e.name&&"string"==typeof t?"yes"===t?"Yes":"no"===t?"No":(0,a.jsx)("i",{className:"text-neutral-medium",children:"Not specified"}):Array.isArray(t)?t.join(", ")||(0,a.jsx)("i",{className:"text-neutral-medium",children:"Not specified"}):t||(0,a.jsx)("i",{className:"text-neutral-medium",children:"Not set"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("strong",{className:"font-semibold text-neutral-dark/90 dark:text-neutral-light/90",children:[r,":"]})," ",(0,a.jsx)("span",{className:"text-neutral-dark/70 dark:text-neutral-light/70",children:t})]},"review-common-".concat(e.name))})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{className:"font-semibold text-neutral-dark/90 dark:text-neutral-light/90",children:"Status:"})," ",(0,a.jsx)("span",{className:"text-neutral-dark/70 dark:text-neutral-light/70",children:h.disabled?"Disabled (Hidden from listings)":"Enabled (Visible in listings)"})]})]}),h.category&&_.length>0&&(0,a.jsxs)("div",{className:"p-6 border border-neutral-medium/40 dark:border-neutral-medium/60 rounded-xl space-y-4 bg-white dark:bg-neutral-dark/40 shadow-md",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3 pb-3 border-b border-neutral-medium/30 dark:border-neutral-medium/50",children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold text-neutral-dark dark:text-neutral-light",children:[h.category," specifics"]}),(0,a.jsx)("button",{type:"button",onClick:()=>u(2),className:"text-sm text-primary-dark dark:text-primary-light hover:underline font-medium px-3 py-1 rounded-md hover:bg-primary/10 dark:hover:bg-primary-dark/20 transition-colors",children:"Edit"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-3",children:_.map(e=>{let t=e.label.endsWith("*")?e.label.slice(0,-1):e.label,r=h[e.name];return r=Array.isArray(r)?r.join(", ")||(0,a.jsx)("i",{className:"text-neutral-medium",children:"Not specified"}):r||(0,a.jsx)("i",{className:"text-neutral-medium",children:"Not set"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("strong",{className:"font-semibold text-neutral-dark/90 dark:text-neutral-light/90",children:[t,":"]})," ",(0,a.jsx)("span",{className:"text-neutral-dark/70 dark:text-neutral-light/70",children:r})]},"review-specific-".concat(e.name))})})]}),(h.tiers||[]).length>0&&(0,a.jsxs)("div",{className:"p-6 border border-neutral-medium/40 dark:border-neutral-medium/60 rounded-xl space-y-5 bg-white dark:bg-neutral-dark/40 shadow-md",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-neutral-medium/30 dark:border-neutral-medium/50",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-neutral-dark dark:text-neutral-light",children:"Service packages (Tiers)"}),(0,a.jsx)("button",{type:"button",onClick:()=>u(3),className:"text-sm text-primary-dark dark:text-primary-light hover:underline font-medium px-3 py-1 rounded-md hover:bg-primary/10 dark:hover:bg-primary-dark/20 transition-colors",children:"Edit"})]}),(h.tiers||[]).map((e,t)=>(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-neutral-medium/20 dark:border-neutral-medium/40 bg-neutral-light/30 dark:bg-neutral-dark/20 space-y-2 shadow-sm",children:[(0,a.jsx)("p",{className:"text-lg font-semibold text-primary dark:text-primary-light",children:e.tierName||(0,a.jsx)("i",{className:"text-neutral-medium",children:"Unnamed Package Tier"})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-1 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{className:"font-medium text-neutral-dark/80 dark:text-neutral-light/80",children:"Price:"})," ",(0,a.jsxs)("span",{className:"text-neutral-dark/70 dark:text-neutral-light/70",children:["$",void 0!==e.tierPrice&&null!==e.tierPrice&&""!==e.tierPrice?e.tierPrice:(0,a.jsx)("i",{className:"text-neutral-medium",children:"N/A"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{className:"font-medium text-neutral-dark/80 dark:text-neutral-light/80",children:"Duration:"})," ",(0,a.jsxs)("span",{className:"text-neutral-dark/70 dark:text-neutral-light/70",children:[e.tierDurationHours||(0,a.jsx)("i",{className:"text-neutral-medium",children:"N/A"})," hours"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{className:"font-medium text-sm text-neutral-dark/80 dark:text-neutral-light/80 block mb-0.5",children:"Description:"}),(0,a.jsx)("p",{className:"text-xs p-2 bg-neutral-light/50 dark:bg-neutral-dark/10 rounded border border-neutral-medium/10 dark:border-neutral-medium/30 text-neutral-dark/70 dark:text-neutral-light/70",children:e.tierDescription||(0,a.jsx)("i",{className:"text-neutral-medium",children:"No description"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{className:"font-medium text-sm text-neutral-dark/80 dark:text-neutral-light/80",children:"Inclusions:"}),e.tierInclusions&&e.tierInclusions.length>0?(0,a.jsx)("ul",{className:"list-disc list-inside pl-4 text-sm space-y-0.5 mt-1 text-neutral-dark/70 dark:text-neutral-light/70",children:(e.tierInclusions||[]).map(e=>(0,a.jsxs)("li",{children:[e.label," ",!e.isPredefined&&(0,a.jsx)("span",{className:"text-xs text-accent dark:text-pink-400",children:"(Custom)"})]},e.id))}):(0,a.jsx)("p",{className:"text-sm text-neutral-medium pl-4",children:(0,a.jsx)("i",{children:"No inclusions for this tier."})})]})]},"review-tier-".concat(e.id||t)))]}),(h.addons||[]).length>0&&(0,a.jsxs)("div",{className:"p-6 border border-neutral-medium/40 dark:border-neutral-medium/60 rounded-xl space-y-5 bg-white dark:bg-neutral-dark/40 shadow-md",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-neutral-medium/30 dark:border-neutral-medium/50",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-neutral-dark dark:text-neutral-light",children:"Optional add-ons"}),(0,a.jsx)("button",{type:"button",onClick:()=>u(4),className:"text-sm text-primary-dark dark:text-primary-light hover:underline font-medium px-3 py-1 rounded-md hover:bg-primary/10 dark:hover:bg-primary-dark/20 transition-colors",children:"Edit"})]}),(h.addons||[]).map((e,t)=>{var r;return(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-neutral-medium/20 dark:border-neutral-medium/40 bg-neutral-light/30 dark:bg-neutral-dark/20 space-y-2 shadow-sm",children:[(0,a.jsx)("p",{className:"text-lg font-semibold text-primary dark:text-primary-light",children:e.addonName||e.predefinedId&&(null===(r=N.find(t=>t.id===e.predefinedId))||void 0===r?void 0:r.label)||(0,a.jsx)("i",{className:"text-neutral-medium",children:"Unnamed Add-on"})}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-1 text-sm",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{className:"font-medium text-neutral-dark/80 dark:text-neutral-light/80",children:"Price:"}),(0,a.jsxs)("span",{className:"text-neutral-dark/70 dark:text-neutral-light/70",children:[" $",void 0!==e.addonPrice&&null!==e.addonPrice&&""!==e.addonPrice?e.addonPrice:(0,a.jsx)("i",{className:"text-neutral-medium",children:"N/A"})]})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{className:"font-medium text-sm text-neutral-dark/80 dark:text-neutral-light/80 block mb-0.5",children:"Description:"}),(0,a.jsx)("p",{className:"text-xs p-2 bg-neutral-light/50 dark:bg-neutral-dark/10 rounded border border-neutral-medium/10 dark:border-neutral-medium/30 text-neutral-dark/70 dark:text-neutral-light/70",children:e.addonDescription||(0,a.jsx)("i",{className:"text-neutral-medium",children:"No description"})})]})]},"review-addon-".concat(t))})]}),(0,a.jsxs)("div",{className:"flex justify-center mt-10 pt-8 border-t border-neutral-medium/30 dark:border-neutral-medium/50 space-x-4",children:[(0,a.jsx)("button",{onClick:Y,className:"bg-neutral-500 hover:bg-neutral-600 dark:bg-neutral-600 dark:hover:bg-neutral-700 text-white px-8 py-3 rounded-lg text-base font-semibold transition-colors shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-neutral-400 focus:ring-opacity-50",children:"Previous"}),(0,a.jsx)("button",{onClick:er,disabled:O,className:"px-10 py-3 text-base font-semibold rounded-lg transition-all shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-opacity-50 ".concat(O?"bg-neutral-400 dark:bg-neutral-500 text-neutral-100 dark:text-neutral-300 cursor-not-allowed":"bg-primary hover:bg-primary-dark text-white dark:bg-primary-dark dark:hover:bg-primary-darker dark:text-neutral-light focus:ring-primary"),children:O?l?"Saving Changes...":"Publishing Service...":l?"Save Changes":"Publish Service"})]})]})]})};var I=_},7929:function(){},7599:function(e,t,r){"use strict";r.d(t,{b:function(){return a}});let a=[{name:"Wedding Photographer",label:"Capture Every Moment",image:"/images/wedding-photographer.jpg",logo:"/icons/wedding-photographer.svg",popular:!0},{name:"Wedding Videographer",label:"Your Story in Motion",image:"/images/wedding-videographer.jpg",logo:"/icons/wedding-videographer.svg",popular:!0},{name:"Bridal Makeup Artist",label:"Look Your Best",image:"/images/bridal-makeup-artist.jpg",logo:"/icons/bridal-makeup-artist.svg",popular:!0},{name:"Wedding Emcee",label:"Host the Party",image:"/images/wedding-emcee.jpg",logo:"/icons/wedding-emcee.svg",popular:!0},{name:"Wedding Band",label:"Set the Mood",image:"/images/wedding-band.jpg",logo:"/icons/wedding-band.svg",popular:!0},{name:"Wedding Decorator",logo:"/icons/wedding-decorator.svg",popular:!1},{name:"ROM Solemnizer",logo:"/icons/rom-solemnizer.svg",popular:!1},{name:"Wedding Planner",logo:"/icons/wedding-planner.svg",popular:!1},{name:"Photo Booth Services",logo:"/icons/photo-booth.svg",popular:!1},{name:"Live Painter",logo:"/icons/live-painter.svg",popular:!1},{name:"Florist",logo:"/icons/florist.svg",popular:!1},{name:"Gown Rental",logo:"/icons/gown-rental.svg",popular:!1},{name:"Suit Tailor",logo:"/icons/suit-tailor.svg",popular:!1},{name:"Catering Services",logo:"/icons/catering-services.svg",popular:!1}]}}]);