(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{2252:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return r(826)}])},826:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var a=r(5893),l=r(5675),s=r.n(l),i=r(1163),n=r(7294),d=r(9583),c=function(e){var t,r,l,n,c,o,u,m;let{service:x,searchDate:h}=e,g=(0,i.useRouter)();return(0,a.jsxs)("div",{className:"flex flex-col gap-2 p-3 cursor-pointer mb-8 bg-neutral-light dark:bg-neutral-dark rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 border border-neutral-medium/30 dark:border-neutral-medium",onClick:()=>g.push("/service/".concat(x.id,"?searchDate=").concat(h)),children:[(0,a.jsx)("div",{className:"relative w-full h-40",children:(0,a.jsx)(s(),{src:(null===(t=x.images)||void 0===t?void 0:t[0])||"/fallback.jpg",alt:"service",fill:!0,className:"rounded-md object-cover"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)("div",{children:(null===(r=x.createdBy)||void 0===r?void 0:r.avatar)?(0,a.jsx)(s(),{src:x.createdBy.avatar,alt:"profile",height:30,width:30,className:"rounded-full"}):(0,a.jsx)("div",{className:"bg-primary h-7 w-7 flex items-center justify-center rounded-full relative",children:(0,a.jsx)("span",{className:"text-lg text-primary-darker dark:text-white",children:(null===(l=x.createdBy)||void 0===l?void 0:null===(n=l.email)||void 0===n?void 0:null===(c=n[0])||void 0===c?void 0:c.toUpperCase())||"?"})})}),(0,a.jsx)("span",{className:"text-md text-neutral-dark dark:text-neutral-light",children:(0,a.jsx)("strong",{className:"font-medium",children:(null===(o=x.createdBy)||void 0===o?void 0:o.userName)||"Unknown"})})]}),(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"line-clamp-2 text-neutral-dark dark:text-neutral-light hover:underline",children:x.title})}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-warning",children:[(0,a.jsx)(d.QJe,{}),(0,a.jsx)("span",{children:(0,a.jsx)("strong",{className:"font-medium text-neutral-dark dark:text-neutral-light",children:(()=>{let{reviews:e}=x,t=0;return(null==e?void 0:e.length)?(e.forEach(e=>{t+=e.rating}),(t/e.length).toFixed(1)):0})()})}),(0,a.jsxs)("span",{className:"text-neutral-medium dark:text-neutral-light",children:["(",null!==(m=null===(u=x.reviews)||void 0===u?void 0:u.length)&&void 0!==m?m:0,")"]})]}),(0,a.jsx)("div",{children:x.tiers&&x.tiers.length>0&&x.tiers[0]?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("strong",{className:"font-medium text-neutral-dark dark:text-neutral-light",children:["From $",void 0!==x.tiers[0].tierPrice&&null!==x.tiers[0].tierPrice?x.tiers[0].tierPrice:"N/A"]})}):(0,a.jsx)("strong",{className:"font-medium text-neutral-dark dark:text-neutral-light",children:"Price not available"})})]})},o=r(9611),u=function(){let e=(0,i.useRouter)(),{category:t,q:r}=e.query,[l,s]=(0,n.useState)(void 0),d=(()=>{let e=new Date,t=new Date(e.toLocaleString("en-US",{timeZone:"Asia/Singapore"})),r=t.getFullYear(),a=(t.getMonth()+1).toString().padStart(2,"0"),l=t.getDate().toString().padStart(2,"0");return"".concat(r,"-").concat(a,"-").concat(l)})(),[u,m]=(0,n.useState)(d);(0,n.useEffect)(()=>{let e=async()=>{try{let e=await (0,o.FF)({category:t,searchTerm:r,serviceDate:u});s(e)}catch(e){console.error("Failed to fetch services:",e),s([])}};t||r||u?e():t||r||u||void 0!==l||s([])},[t,r,u]);let x=e=>{m(e.target.value)};return(0,a.jsxs)("div",{className:"mx-4 sm:mx-8 md:mx-12 lg:mx-24 mb-24 mt-8",children:[r&&(0,a.jsxs)("h3",{className:"text-2xl sm:text-3xl md:text-4xl mb-2 dark:text-gray-100",children:["Results for ",(0,a.jsx)("strong",{children:r})]}),t&&(0,a.jsxs)("p",{className:"text-lg sm:text-xl mb-4 dark:text-gray-300",children:["In category: ",(0,a.jsx)("strong",{children:t})]}),(0,a.jsxs)("div",{className:"my-4",children:[(0,a.jsx)("label",{htmlFor:"searchDate",className:"block text-sm font-medium text-neutral-dark dark:text-neutral-light mb-1",children:"Filter by date:"}),(0,a.jsx)("input",{type:"date",id:"searchDate",value:u,onChange:x,min:d,className:"px-4 py-2 border border-neutral-medium/50 dark:border-neutral-medium rounded-lg bg-neutral-light dark:bg-neutral-dark text-neutral-dark dark:text-neutral-light focus:ring-primary focus:border-primary"})]}),void 0===l&&(0,a.jsx)("p",{className:"dark:text-gray-300",children:"Loading services..."}),l&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"my-4",children:(0,a.jsxs)("span",{className:"text-[#74767e] dark:text-gray-400 font-medium text-sm sm:text-base",children:[l.length," service",1!==l.length?"s":""," available"]})}),l.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6 md:gap-8",children:l.map(e=>(0,a.jsx)(c,{service:e,searchDate:u},e.id))}):(0,a.jsx)("p",{className:"dark:text-gray-300",children:"No services found matching your criteria."})]})]})}}},function(e){e.O(0,[445,774,888,179],function(){return e(e.s=2252)}),_N_E=e.O()}]);