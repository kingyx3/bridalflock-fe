(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[526],{8222:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/seller/services/create",function(){return s(3391)}])},3391:function(e,t,s){"use strict";s.r(t);var n=s(5893),a=s(1163),i=s(7294),r=s(1701),l=s(9611),o=s(9033);t.default=function(){let e=(0,a.useRouter)(),[{user:t,isAuthLoading:s}]=(0,r.C4)(),[d,c]=(0,i.useState)(!1),[u,g]=(0,i.useState)(""),[p,h]=(0,i.useState)(!0);(0,i.useEffect)(()=>{if(s||void 0===t){h(!0);return}if(null===t){h(!1);return}if(t){let s=!!t.stripeOnboardingCompletedAt,n=!!t.stripeOnboardingComplete,a=!0===t.stripeChargesEnabled,i=!0===t.stripeDetailsSubmitted;if(s&&(n||a&&i))h(!1);else{let r="incomplete_onboarding";s?n||a&&i||(r="account_not_operational",!1===t.stripeChargesEnabled?r="charges_not_enabled":!1!==t.stripeDetailsSubmitted||(r="details_not_submitted")):r="oauth_not_completed",console.warn("Stripe onboarding not fully completed (OAuth: ".concat(s,", ChargesEnabled: ").concat(t.stripeChargesEnabled,", DetailsSubmitted: ").concat(t.stripeDetailsSubmitted,"). Redirecting to onboarding with reason: ").concat(r)),e.push("/seller/stripe-onboarding?reason=".concat(r))}}},[t,s,e]);let m=async s=>{if(c(!0),g(""),!t||!t.uid){g("User information is not available. Please ensure you are properly logged in and try again."),c(!1);return}try{let n=t.uid,a={...s,userId:n};await (0,l.M3)(a),e.push("/seller/services")}catch(t){console.error("Error adding service:",t);let e="Failed to create service. Please try again.";t.response&&t.response.data&&t.response.data.message?e=t.response.data.message:t.message&&(e=t.message),g(e)}finally{c(!1)}};return s||p?(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,n.jsx)("p",{children:"Loading and verifying account status..."})}):t&&(!t||t.stripeOnboardingCompletedAt)?(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8 px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,n.jsxs)("div",{className:"text-center mb-10",children:[(0,n.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"Create a New Service"}),(0,n.jsx)("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Showcase your skills and services to potential clients"})]}),(0,n.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow-xl rounded-2xl p-6 sm:p-8",children:(0,n.jsx)(o.Z,{user:t,existingImages:[],setExistingImages:()=>{},error:u,isSubmitting:d||!t||!t.uid,onSubmit:m})})]})}):(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,n.jsx)("p",{children:"Redirecting..."})})}}},function(e){e.O(0,[33,774,888,179],function(){return e(e.s=8222)}),_N_E=e.O()}]);