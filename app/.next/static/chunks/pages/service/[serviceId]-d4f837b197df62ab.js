(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[844],{8075:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/service/[serviceId]",function(){return r(7226)}])},7226:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var a=r(5893),i=r(7294),l=r(6893),s=r(7516),n=r(3750),d=r(1701),c=r(1163),o=function(e){let{searchDate:t}=e,[{serviceData:r,user:o},x]=(0,d.C4)(),u=(0,c.useRouter)(),[m,h]=(0,i.useState)(null);return((0,i.useEffect)(()=>{(null==r?void 0:r.tiers)&&r.tiers.length>0&&h(r.tiers[0])},[r]),(null==r?void 0:r.tiers)&&0!==r.tiers.length)?(0,a.jsxs)("div",{className:"lg:col-span-1 w-full lg:sticky lg:top-36 mb-10 h-max flex flex-col gap-4",children:[r.tiers.map(e=>{let t=void 0!==e.tierPrice&&null!==e.tierPrice?e.tierPrice:"0",r=void 0!==e.tierDurationHours&&null!==e.tierDurationHours?e.tierDurationHours:"N/A",i=e.tierName||e.tierDescription||"N/A",s=void 0!==e.revisions&&null!==e.revisions?"".concat(e.revisions," Revisions"):"N/A Revisions",d=e.tierInclusions||[],c=(null==m?void 0:m.id)===e.id;return(0,a.jsxs)("div",{role:"button",tabIndex:0,className:"bg-white dark:bg-neutral-dark border p-6 sm:p-8 md:p-10 flex flex-col gap-5 rounded-lg shadow-sm cursor-pointer focus:outline-none focus:ring-2 focus:ring-accent ".concat(c?"border-accent dark:border-accent ring-2 ring-accent dark:ring-accent":"border-neutral-medium dark:border-neutral-medium hover:border-neutral-strong dark:hover:border-neutral-light"),onClick:()=>h(e),onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&h(e)},children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("h4",{className:"text-md font-normal text-neutral-medium dark:text-neutral-light",children:i}),(0,a.jsxs)("h6",{className:"font-medium text-lg dark:text-neutral-light",children:["$",t]})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"text-neutral-medium dark:text-neutral-light font-semibold text-sm flex flex-col sm:flex-row sm:gap-6 items-start sm:items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2 sm:mb-0",children:[(0,a.jsx)(l.TCC,{className:"text-xl"}),(0,a.jsxs)("span",{children:[r," Hours Delivery"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.Qxo,{className:"text-xl"}),(0,a.jsx)("span",{children:s})]})]})}),(0,a.jsx)("ul",{className:"flex gap-1 flex-col",children:d.map(e=>(0,a.jsxs)("li",{className:"flex items-center gap-3",children:[(0,a.jsx)(n.IQF,{className:"text-success text-lg"}),(0,a.jsx)("span",{className:"text-neutral-dark dark:text-neutral-light",children:e.label})]},e.id||e.label))})]},e.id)}),r.userId===(null==o?void 0:o.uid)?(0,a.jsxs)("button",{className:"flex items-center bg-accent hover:bg-pink-500 dark:hover:bg-pink-600 text-white py-2 justify-center font-bold text-lg relative rounded transition-colors mt-4",onClick:()=>u.push("/seller/services/".concat(r.id)),children:[(0,a.jsx)("span",{children:"Edit"}),(0,a.jsx)(s.OEZ,{className:"text-2xl absolute right-4"})]}):(0,a.jsxs)("button",{className:"flex items-center bg-accent hover:bg-pink-500 dark:hover:bg-pink-600 text-white py-2 justify-center font-bold text-lg relative rounded transition-colors mt-4",onClick:()=>{m?u.push("/checkout?serviceId=".concat(r.id,"&tierId=").concat(m.id,"&serviceDate=").concat(t)):alert("Please select a tier to continue.")},disabled:!m,children:[(0,a.jsx)("span",{children:"Continue"}),(0,a.jsx)(s.OEZ,{className:"text-2xl absolute right-4"})]})]}):(0,a.jsx)("div",{className:"lg:col-span-1 w-full lg:sticky lg:top-36 mb-10 h-max",children:(0,a.jsx)("div",{className:"bg-white dark:bg-neutral-dark border dark:border-neutral-medium p-6 sm:p-8 md:p-10 flex flex-col gap-5 rounded-lg shadow-sm",children:(0,a.jsx)("p",{className:"text-neutral-medium dark:text-neutral-light",children:"Pricing information not available."})})})},x=r(5675),u=r.n(x),m=r(9822),h=r(9583),g=r(9611),v=function(e){let{reviewEligibility:t}=e,[{serviceData:r,user:l},s]=(0,d.C4)(),[n,o]=(0,i.useState)({reviewText:"",rating:0}),x=(0,c.useRouter)(),{serviceId:u}=x.query,v=async()=>{if(!u||!n.reviewText||0===n.rating){alert("Please provide a review text and a rating.");return}try{let e=await (0,g.N_)({serviceId:u,...n});e&&(o({reviewText:"",rating:0}),s({type:m.J.ADD_REVIEW,newReview:{...e,reviewerId:l.uid,serviceId:u,createdAt:new Date().toISOString()}}))}catch(e){console.error("Error submitting review:",e),alert("Failed to submit review: ".concat(e.message||"Please try again."))}};if(!t)return(0,a.jsx)("div",{className:"mb-10 p-4 text-neutral-medium dark:text-neutral-light",children:"Loading review eligibility..."});if(t.loading)return(0,a.jsx)("div",{className:"mb-10 p-4 text-neutral-medium dark:text-neutral-light",children:"Checking review eligibility..."});if(!t.eligible){let e="You are not eligible to review this service at this time.";switch(t.reason){case"NOT_ORDERED_OR_COMPLETED":e="You need to purchase and have this service delivered to write a review.";break;case"WINDOW_EXPIRED":e="The 2-day window to review this service has expired.";break;case"MISSING_COMPLETION_DATE":e="Cannot determine review eligibility due to missing completion date for the order.";break;case"ERROR_CHECKING_ELIGIBILITY":e="Could not determine review eligibility at this time. Please try again later.";break;case"NOT_LOGGED_IN":e="Please log in to submit a review."}return(0,a.jsx)("div",{className:"mb-10 p-4 bg-warning/30 dark:bg-warning/40 border-l-4 border-warning dark:border-warning text-yellow-600 dark:text-yellow-100",children:(0,a.jsx)("p",{children:e})})}return(0,a.jsxs)("div",{className:"mb-10",children:[(0,a.jsxs)("h3",{className:"text-2xl my-5 font-normal text-neutral-dark dark:text-neutral-light",children:["Leave a Review for ",(null==r?void 0:r.title)||"this service"]}),(0,a.jsxs)("div",{className:"flex flex-col items-start justify-start gap-3",children:[(0,a.jsx)("textarea",{name:"reviewText",id:"reviewText",onChange:e=>o({...n,reviewText:e.target.value}),value:n.reviewText,className:"block p-2.5 w-full md:w-4/6 text-sm text-neutral-dark bg-neutral-light dark:text-neutral-light dark:bg-neutral-dark rounded border border-neutral-medium/70 dark:border-neutral-medium focus:ring-primary focus:border-primary dark:placeholder-neutral-medium",placeholder:"Share your experience with this service...",rows:"4"}),(0,a.jsx)("div",{className:"flex gap-1",children:[1,2,3,4,5].map(e=>(0,a.jsx)(h.QJe,{className:"cursor-pointer text-2xl ".concat(n.rating>=e?"text-warning":"text-neutral-medium/70 dark:text-neutral-medium"),onClick:()=>o({...n,rating:e})},e))}),(0,a.jsx)("button",{className:"flex items-center bg-accent hover:bg-pink-500 dark:hover:bg-pink-600 text-white py-2.5 px-6 justify-center text-md font-semibold rounded transition-colors disabled:opacity-50",onClick:v,disabled:!n.reviewText||0===n.rating,children:"Submit Review"})]})]})},p=function(){let[{serviceData:e}]=(0,d.C4)(),t=e&&e.reviewsCount>0?e.ratingSum/e.reviewsCount:0,r=t.toFixed(1);return(0,a.jsx)(a.Fragment,{children:e&&(0,a.jsxs)("div",{className:"mb-10",children:[(0,a.jsx)("h3",{className:"text-2xl my-5 font-normal text-neutral-dark dark:text-neutral-light",children:"Reviews"}),(0,a.jsxs)("div",{className:"flex gap-3 mb-5 items-center",children:[" ",(0,a.jsxs)("h5",{className:"dark:text-neutral-light",children:[e.reviews.length," reviews for this Service"]}),(0,a.jsxs)("div",{className:"flex text-warning items-center gap-2",children:[(0,a.jsx)("div",{className:"flex gap-1",children:[1,2,3,4,5].map(e=>(0,a.jsx)(h.QJe,{className:"cursor-pointer ".concat(Math.ceil(t)>=e?"text-warning":"text-neutral-medium/70 dark:text-neutral-medium")},e))}),(0,a.jsx)("span",{className:"dark:text-warning",children:r})," "]})]}),(0,a.jsx)("div",{className:"flex flex-col gap-6",children:e.reviews.map(e=>(0,a.jsxs)("div",{className:"flex gap-3 border-t dark:border-neutral-medium pt-6",children:[(0,a.jsx)("div",{children:e.reviewer.avatar?(0,a.jsx)(u(),{src:e.reviewer.avatar,alt:"Profile",width:40,height:40,className:"rounded-full"}):(0,a.jsx)("div",{className:"bg-purple-500 h-10 w-10 flex items-center justify-center rounded-full relative",children:(0,a.jsx)("span",{className:"text-xl text-white",children:e.reviewer.email[0].toUpperCase()})})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("h4",{className:"dark:text-neutral-light",children:e.reviewer.fullName}),(0,a.jsxs)("div",{className:"flex text-warning items-center gap-2",children:[(0,a.jsx)("div",{className:"flex gap-1",children:[1,2,3,4,5].map(t=>(0,a.jsx)(h.QJe,{className:"cursor-pointer ".concat(e.rating>=t?"text-warning":"text-neutral-medium/70 dark:text-neutral-medium")},t))}),(0,a.jsx)("span",{className:"dark:text-warning",children:e.rating})," "]}),(0,a.jsx)("p",{className:"text-neutral-dark dark:text-neutral-light pr-20",children:e.reviewText})]})]},e.id))})]})})};let f=e=>{let{rating:t,maxRating:r=5,starClassName:i="text-accent",emptyStarClassName:l="text-neutral-medium dark:text-neutral-500"}=e,s=Math.ceil(t);return(0,a.jsx)("div",{className:"flex",children:[...Array(r)].map((e,t)=>{let r=t+1;return(0,a.jsx)(h.QJe,{className:"cursor-pointer ".concat(r<=s?i:l)},r)})})},N=e=>{let{user:t,size:r=30}=e;if(!t)return null;let{avatar:i,email:l,fullName:s}=t,n=l?l[0].toUpperCase():s?s[0].toUpperCase():"?";return(0,a.jsx)("div",{children:i?(0,a.jsx)(u(),{src:i,alt:s||l||"User avatar",height:r,width:r,className:"rounded-full"}):(0,a.jsx)("div",{className:"bg-primary flex items-center justify-center rounded-full",style:{height:r,width:r},children:(0,a.jsx)("span",{className:"text-primary-darker dark:text-neutral-light",style:{fontSize:r/2},children:n})})})};var j=i.memo(N),w=function(e){var t,r,l,s,n;let{reviewEligibility:c}=e,[{serviceData:o}]=(0,d.C4)(),x=o&&void 0!==o.averageRating?parseFloat(o.averageRating):NaN,m=isNaN(x)?"N/A":x.toFixed(1),[h,g]=(0,i.useState)("");return(0,i.useEffect)(()=>{o&&Array.isArray(o.images)&&o.images.length>0?g(o.images[0]):o&&g("")},[o]),(0,a.jsx)(a.Fragment,{children:o&&(0,a.jsxs)("div",{className:"col-span-2 flex flex-col gap-3",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-neutral-dark dark:text-neutral-light mb-1 md:text-3xl",children:o.title}),(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)(j,{user:o.createdBy||null,size:30}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("h4",{className:"text-neutral-dark dark:text-neutral-light font-bold",children:(null===(t=o.createdBy)||void 0===t?void 0:t.fullName)||"Seller Name Not Available"}),(0,a.jsxs)("h6",{className:"text-neutral-medium dark:text-neutral-light",children:["@",(null===(r=o.createdBy)||void 0===r?void 0:r.userName)||"N/A"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(f,{rating:o.reviewsCount>0?o.ratingSum/o.reviewsCount:0}),(0,a.jsx)("span",{className:"text-yellow-500",children:o.reviewsCount>0?(o.ratingSum/o.reviewsCount).toFixed(1):"0.0"}),(0,a.jsxs)("span",{className:"text-[#27272a] dark:text-gray-300",children:["(",void 0!==o.reviewsCount?o.reviewsCount:0,")"]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[h&&(0,a.jsx)("div",{className:"relative w-full aspect-square max-w-[500px] md:max-w-[600px] mx-auto overflow-hidden rounded-lg shadow-lg",children:(0,a.jsx)(u(),{src:h,alt:"Service",layout:"fill",objectFit:"cover",className:"hover:scale-110 transition-all duration-500",priority:!0})}),(0,a.jsx)("div",{className:"flex gap-4 flex-wrap justify-center mt-2",children:Array.isArray(o.images)&&o.images.length>1&&o.images.map(e=>(0,a.jsx)("div",{className:"relative w-[80px] h-[80px] md:w-[100px] md:h-[100px] rounded-md overflow-hidden cursor-pointer shadow-md",children:(0,a.jsx)(u(),{src:e,alt:"service thumbnail",layout:"fill",objectFit:"cover",onClick:()=>g(e),className:"".concat(h===e?"ring-2 ring-accent-blue":"opacity-70 hover:opacity-100"," transition-all duration-300")})},e))})]}),(0,a.jsxs)("div",{className:"mt-6",children:[" ",(0,a.jsxs)("h3",{className:"text-2xl md:text-3xl my-5 font-semibold text-neutral-dark dark:text-neutral-light",children:[" ","About this service"]}),(0,a.jsxs)("div",{className:"text-neutral-dark dark:text-neutral-light prose prose-sm md:prose-base max-w-none",children:[" ",(0,a.jsx)("p",{children:o.description})]})]}),(0,a.jsxs)("div",{className:"mt-8",children:[" ",(0,a.jsxs)("h3",{className:"text-2xl md:text-3xl my-5 font-semibold text-neutral-dark dark:text-neutral-light",children:[" ","About the Seller"]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:gap-6 items-center sm:items-start p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-slate-800",children:[" ",(0,a.jsxs)("div",{className:"mb-4 sm:mb-0 flex-shrink-0",children:[" ",(0,a.jsx)(j,{user:o.createdBy||null,size:100,mdSize:120})," "]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,a.jsxs)("div",{className:"flex flex-col xs:flex-row gap-x-2 items-baseline",children:[" ",(0,a.jsxs)("h4",{className:"font-semibold text-xl text-neutral-dark dark:text-neutral-light",children:[" ",(null===(l=o.createdBy)||void 0===l?void 0:l.fullName)||"Seller Name Not Available"]}),(0,a.jsxs)("span",{className:"text-neutral-medium dark:text-neutral-medium text-sm",children:["@",(null===(s=o.createdBy)||void 0===s?void 0:s.userName)||"N/A"]})]}),(0,a.jsxs)("div",{className:"text-neutral-dark dark:text-neutral-light prose prose-sm max-w-none mt-1",children:[" ",(0,a.jsx)("p",{children:(null===(n=o.createdBy)||void 0===n?void 0:n.description)||"No description provided."})," "]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 mt-2",children:[" ",(0,a.jsx)(f,{rating:isNaN(x)?0:x}),(0,a.jsxs)("span",{className:"text-yellow-500 font-semibold",children:[" ",m]}),(0,a.jsxs)("span",{className:"text-neutral-medium dark:text-neutral-medium",children:["(",void 0!==o.totalReviews?o.totalReviews:0," reviews)"]})]})]})]})]}),(0,a.jsx)(p,{}),(0,a.jsx)(v,{reviewEligibility:c})]})})},b=function(){let e=(0,c.useRouter)(),{serviceId:t,searchDate:r}=e.query,[{serviceData:l,user:s},n]=(0,d.C4)(),[x,u]=(0,i.useState)(!0),[h,v]=(0,i.useState)(null),[p,f]=(0,i.useState)({eligible:!1,reason:null,loading:!0});return((0,i.useEffect)(()=>{n({type:m.J.SET_SERVICE_DATA,serviceData:void 0})},[n]),(0,i.useEffect)(()=>{let e=!0,r=async()=>{if(!t||"string"!=typeof t){e&&(u(!1),v("Service ID is invalid."));return}e&&(u(!0),v(null));try{let r=await (0,g.ko)(t);e&&(n({type:m.J.SET_SERVICE_DATA,serviceData:r}),u(!1))}catch(t){console.log(t),e&&(v("Failed to load service details. Please try again later."),u(!1))}};return r(),()=>{e=!1}},[t,n]),(0,i.useEffect)(()=>{let e=async()=>{if("string"==typeof t&&(null==s?void 0:s.uid)){f({eligible:!1,reason:null,loading:!0});try{let e=await (0,g.pg)(s.uid,t);f({...e,loading:!1})}catch(e){console.error("Error checking review eligibility:",e),f({eligible:!1,reason:"ERROR_CHECKING_ELIGIBILITY",loading:!1})}}else(null==s?void 0:s.uid)||f({eligible:!1,reason:"NOT_LOGGED_IN",loading:!1})};e()},[t,null==s?void 0:s.uid]),(0,i.useEffect)(()=>{let e=!0,r=async()=>{if((null==s?void 0:s.uid)&&"string"==typeof t)try{let r=await (0,g.UD)(t,s.uid);e&&n({type:m.J.HAS_USER_ORDERED_SERVICE,hasOrdered:r})}catch(t){console.error("Error checking if service was ordered:",t),e&&n({type:m.J.HAS_USER_ORDERED_SERVICE,hasOrdered:!1})}else e&&n({type:m.J.HAS_USER_ORDERED_SERVICE,hasOrdered:!1})};return r(),()=>{e=!1}},[t,s,n]),x)?(0,a.jsx)("p",{className:"container mx-auto px-4 py-8 text-center",children:"Loading service details..."}):h?(0,a.jsx)("p",{className:"container mx-auto px-4 py-8 text-center text-red-600",children:h}):(0,a.jsx)(a.Fragment,{children:l?(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 sm:px-6 lg:px-8",children:[" ",(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 lg:gap-12 xl:gap-16",children:[(0,a.jsx)(w,{reviewEligibility:p})," ",(0,a.jsx)(o,{searchDate:r})]})]}):(0,a.jsx)("p",{className:"container mx-auto px-4 py-8 text-center",children:"Service details are not available."})})}}},function(e){e.O(0,[445,13,874,774,888,179],function(){return e(e.s=8075)}),_N_E=e.O()}]);